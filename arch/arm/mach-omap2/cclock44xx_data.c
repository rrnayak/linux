/*
 * OMAP4 Clock data
 *
 * Copyright (C) 2009-2011 Texas Instruments, Inc.
 * Copyright (C) 2009-2010 Nokia Corporation
 *
 * Paul Walmsley (paul@pwsan.com)
 * Rajendra Nayak (rnayak@ti.com)
 * Benoit Cousson (b-cousson@ti.com)
 * Mike Turquette (mturquette@ti.com)
 *
 * This file is automatically generated from the OMAP hardware databases.
 * We respectfully ask that any modifications to this file be coordinated
 * with the public linux-omap@vger.kernel.org mailing list and the
 * authors above to ensure that the autogeneration scripts are kept
 * up-to-date with the file contents.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 * XXX Some of the ES1 clocks have been removed/changed; once support
 * is added for discriminating clocks by ES level, these should be added back
 * in.
 */

#include <linux/kernel.h>
#include <linux/list.h>
#include <linux/clk-private.h>
#include <linux/clkdev.h>
#include <linux/io.h>

#include <plat/hardware.h>

#include "iomap.h"
#include "clock.h"
#include "clock44xx.h"
#include "cm1_44xx.h"
#include "cm2_44xx.h"
#include "cm-regbits-44xx.h"
#include "prm44xx.h"
#include "prm-regbits-44xx.h"
#include "control.h"
#include "scrm44xx.h"

/* OMAP4 modulemode control */
#define OMAP4430_MODULEMODE_HWCTRL_SHIFT		0
#define OMAP4430_MODULEMODE_SWCTRL_SHIFT		1

/*LIST_HEAD(clocks);*/

/* Root clocks */

DEFINE_CLK_FIXED_RATE(extalt_clkin_ck, CLK_IS_ROOT, 59000000, 0x0);

DEFINE_CLK_FIXED_RATE(pad_clks_src_ck, CLK_IS_ROOT, 12000000, 0x0);

DEFINE_CLK_GATE(pad_clks_ck, "pad_clks_src_ck", &pad_clks_src_ck, 0x0,
		OMAP4430_CM_CLKSEL_ABE, OMAP4430_PAD_CLKS_GATE_SHIFT,
		0x0, NULL);

DEFINE_CLK_FIXED_RATE(pad_slimbus_core_clks_ck, CLK_IS_ROOT, 12000000, 0x0);

DEFINE_CLK_FIXED_RATE(secure_32k_clk_src_ck, CLK_IS_ROOT, 32768, 0x0);

DEFINE_CLK_FIXED_RATE(slimbus_src_clk, CLK_IS_ROOT, 12000000, 0x0);

DEFINE_CLK_GATE(slimbus_clk, "slimbus_src_clk", &slimbus_src_clk, 0x0,
		OMAP4430_CM_CLKSEL_ABE, OMAP4430_SLIMBUS_CLK_GATE_SHIFT,
		0x0, NULL);

DEFINE_CLK_FIXED_RATE(sys_32k_ck, CLK_IS_ROOT, 32768, 0x0);

DEFINE_CLK_FIXED_RATE(virt_12000000_ck, CLK_IS_ROOT, 12000000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_13000000_ck, CLK_IS_ROOT, 13000000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_16800000_ck, CLK_IS_ROOT, 16800000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_19200000_ck, CLK_IS_ROOT, 19200000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_26000000_ck, CLK_IS_ROOT, 26000000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_27000000_ck, CLK_IS_ROOT, 27000000, 0x0);

DEFINE_CLK_FIXED_RATE(virt_38400000_ck, CLK_IS_ROOT, 38400000, 0x0);

static const struct clksel_rate div_1_0_rates[] = {
	{ .div = 1, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel_rate div_1_1_rates[] = {
	{ .div = 1, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel_rate div_1_2_rates[] = {
	{ .div = 1, .val = 2, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel_rate div_1_3_rates[] = {
	{ .div = 1, .val = 3, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel_rate div_1_4_rates[] = {
	{ .div = 1, .val = 4, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel_rate div_1_5_rates[] = {
	{ .div = 1, .val = 5, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const char *sys_clkin_ck_parent_names[] = {
	"virt_12000000_ck",
	"virt_13000000_ck",
	"virt_16800000_ck",
	"virt_19200000_ck",
	"virt_26000000_ck",
	"virt_27000000_ck",
	"virt_38400000_ck",
};

DEFINE_CLK_MUX(sys_clkin_ck,
	sys_clkin_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_SYS_CLKSEL,
	OMAP4430_SYS_CLKSEL_SHIFT,
	OMAP4430_SYS_CLKSEL_WIDTH,
	CLK_MUX_INDEX_ONE,
	NULL);

DEFINE_CLK_FIXED_RATE(tie_low_clock_ck, CLK_IS_ROOT, 0, 0x0);

DEFINE_CLK_FIXED_RATE(utmi_phy_clkout_ck, CLK_IS_ROOT, 60000000, 0x0);

DEFINE_CLK_FIXED_RATE(xclk60mhsp1_ck, CLK_IS_ROOT, 60000000, 0x0);

DEFINE_CLK_FIXED_RATE(xclk60mhsp2_ck, CLK_IS_ROOT, 60000000, 0x0);

DEFINE_CLK_FIXED_RATE(xclk60motg_ck, CLK_IS_ROOT, 60000000, 0x0);

/* Module clocks and DPLL outputs */

static const char *abe_dpll_bypass_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

DEFINE_CLK_MUX(abe_dpll_bypass_clk_mux_ck,
	abe_dpll_bypass_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_L4_WKUP_CLKSEL,
	OMAP4430_CLKSEL_SHIFT,
	OMAP4430_CLKSEL_WIDTH,
	0x0,
	NULL);

static const char *abe_dpll_refclk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

DEFINE_CLK_MUX(abe_dpll_refclk_mux_ck,
	abe_dpll_refclk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_ABE_PLL_REF_CLKSEL,
	OMAP4430_CLKSEL_0_0_SHIFT,
	OMAP4430_CLKSEL_0_0_WIDTH,
	0x0,
	NULL);

/* DPLL_ABE */
static struct dpll_data dpll_abe_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_ABE,
	.clk_bypass	= &abe_dpll_bypass_clk_mux_ck,
	.clk_ref	= &abe_dpll_refclk_mux_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_ABE,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_ABE,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_ABE,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.max_multiplier	= 2047,
	.max_divider	= 128,
	.min_divider	= 1,
};


static const char *dpll_abe_ck_parents[] = {
	"abe_dpll_refclk_mux_ck",
};

static struct clk dpll_abe_ck;

static const struct clk_ops dpll_abe_ck_ops = {
	.enable		= &omap3_noncore_dpll_enable,
	.disable	= &omap3_noncore_dpll_disable,
	.recalc_rate	= &omap3_dpll_recalc,
	.round_rate	= &omap2_dpll_round_rate,
	.set_rate	= &omap3_noncore_dpll_set_rate,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_abe_ck_hw = {
	.hw = {
		.clk = &dpll_abe_ck,
	},
	.dpll_data	= &dpll_abe_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_abe_ck = {
	.name		= "dpll_abe_ck",
	.ops		= &dpll_abe_ck_ops,
	.hw		= &dpll_abe_ck_hw.hw,
	.parent_names = dpll_abe_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_abe_ck_parents),
};

static const char *dpll_abe_x2_ck_parents[] = {
	"dpll_abe_ck",
};

static struct clk dpll_abe_x2_ck;

static const struct clk_ops dpll_abe_x2_ck_ops = {
	.recalc_rate	= &omap3_clkoutx2_recalc,
};

static struct clk_hw_omap dpll_abe_x2_ck_hw = {
	.hw = {
		.clk = &dpll_abe_x2_ck,
	},
	.flags		= CLOCK_CLKOUTX2,
	.clksel_reg	= OMAP4430_CM_DIV_M2_DPLL_ABE,
	.allow_idle	= &omap4_dpllmx_allow_gatectrl,
	.deny_idle	= &omap4_dpllmx_deny_gatectrl,
};

static struct clk dpll_abe_x2_ck = {
	.name		= "dpll_abe_x2_ck",
	.ops		= &dpll_abe_x2_ck_ops,
	.hw		= &dpll_abe_x2_ck_hw.hw,
	.parent_names = dpll_abe_x2_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_abe_x2_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_abe_m2x2_ck,
	"dpll_abe_x2_ck",
	&dpll_abe_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_ABE,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_FIXED_FACTOR(abe_24m_fclk,
	"dpll_abe_m2x2_ck",
	&dpll_abe_m2x2_ck,
	0x0,
	1, 8);

DEFINE_CLK_DIVIDER(abe_clk,
	"dpll_abe_m2x2_ck",
	&dpll_abe_m2x2_ck,
	0x0,
	OMAP4430_CM_CLKSEL_ABE,
	OMAP4430_CLKSEL_OPP_SHIFT,
	OMAP4430_CLKSEL_OPP_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(aess_fclk,
	"abe_clk",
	&abe_clk,
	0x0,
	OMAP4430_CM1_ABE_AESS_CLKCTRL,
	OMAP4430_CLKSEL_AESS_FCLK_SHIFT,
	OMAP4430_CLKSEL_AESS_FCLK_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(dpll_abe_m3x2_ck,
	"dpll_abe_x2_ck",
	&dpll_abe_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M3_DPLL_ABE,
	OMAP4430_DPLL_CLKOUTHIF_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUTHIF_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

static const char *core_hsd_byp_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"dpll_abe_m3x2_ck",
};

DEFINE_CLK_MUX(core_hsd_byp_clk_mux_ck,
	core_hsd_byp_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_CLKSEL_DPLL_CORE,
	OMAP4430_DPLL_BYP_CLKSEL_SHIFT,
	OMAP4430_DPLL_BYP_CLKSEL_WIDTH,
	0x0,
	NULL);

/* DPLL_CORE */
static struct dpll_data dpll_core_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_CORE,
	.clk_bypass	= &core_hsd_byp_clk_mux_ck,
	.clk_ref	= &sys_clkin_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_CORE,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_CORE,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_CORE,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.max_multiplier	= 2047,
	.max_divider	= 128,
	.min_divider	= 1,
};


static const char *dpll_core_ck_parents[] = {
	"sys_clkin_ck",
};

static struct clk dpll_core_ck;

static const struct clk_ops dpll_core_ck_ops = {
	.recalc_rate	= &omap3_dpll_recalc,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_core_ck_hw = {
	.hw = {
		.clk = &dpll_core_ck,
	},
	.dpll_data	= &dpll_core_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_core_ck = {
	.name		= "dpll_core_ck",
	.ops		= &dpll_core_ck_ops,
	.hw		= &dpll_core_ck_hw.hw,
	.parent_names = dpll_core_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_core_ck_parents),
};

static const char *dpll_core_x2_ck_parents[] = {
	"dpll_core_ck",
};

static struct clk dpll_core_x2_ck;

static const struct clk_ops dpll_core_x2_ck_ops = {
	.recalc_rate	= &omap3_clkoutx2_recalc,
};

static struct clk_hw_omap dpll_core_x2_ck_hw = {
	.hw = {
		.clk = &dpll_core_x2_ck,
	},
};

static struct clk dpll_core_x2_ck = {
	.name		= "dpll_core_x2_ck",
	.ops		= &dpll_core_x2_ck_ops,
	.hw		= &dpll_core_x2_ck_hw.hw,
	.parent_names = dpll_core_x2_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_core_x2_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_core_m6x2_ck,
	"dpll_core_x2_ck",
	&dpll_core_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M6_DPLL_CORE,
	OMAP4430_HSDIVIDER_CLKOUT3_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT3_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_core_m2_ck,
	"dpll_core_ck",
	&dpll_core_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_CORE,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_FIXED_FACTOR(ddrphy_ck,
	"dpll_core_m2_ck",
	&dpll_core_m2_ck,
	0x0,
	1, 2);

DEFINE_CLK_DIVIDER(dpll_core_m5x2_ck,
	"dpll_core_x2_ck",
	&dpll_core_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M5_DPLL_CORE,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(div_core_ck,
	"dpll_core_m5x2_ck",
	&dpll_core_m5x2_ck,
	0x0,
	OMAP4430_CM_CLKSEL_CORE,
	OMAP4430_CLKSEL_CORE_SHIFT,
	OMAP4430_CLKSEL_CORE_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(div_iva_hs_clk,
	"dpll_core_m5x2_ck",
	&dpll_core_m5x2_ck,
	0x0,
	OMAP4430_CM_BYPCLK_DPLL_IVA,
	OMAP4430_CLKSEL_0_1_SHIFT,
	OMAP4430_CLKSEL_0_1_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(div_mpu_hs_clk,
	"dpll_core_m5x2_ck",
	&dpll_core_m5x2_ck,
	0x0,
	OMAP4430_CM_BYPCLK_DPLL_MPU,
	OMAP4430_CLKSEL_0_1_SHIFT,
	OMAP4430_CLKSEL_0_1_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(dpll_core_m4x2_ck,
	"dpll_core_x2_ck",
	&dpll_core_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M4_DPLL_CORE,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_FIXED_FACTOR(dll_clk_div_ck,
	"dpll_core_m4x2_ck",
	&dpll_core_m4x2_ck,
	0x0,
	1, 2);

DEFINE_CLK_DIVIDER(dpll_abe_m2_ck,
	"dpll_abe_ck",
	&dpll_abe_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_ABE,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_core_m3x2_ck,
	"dpll_core_x2_ck",
	&dpll_core_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M3_DPLL_CORE,
	OMAP4430_DPLL_CLKOUTHIF_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUTHIF_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_core_m7x2_ck,
	"dpll_core_x2_ck",
	&dpll_core_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M7_DPLL_CORE,
	OMAP4430_HSDIVIDER_CLKOUT4_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT4_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

static const char *iva_hsd_byp_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"div_iva_hs_clk",
};

DEFINE_CLK_MUX(iva_hsd_byp_clk_mux_ck,
	iva_hsd_byp_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_CLKSEL_DPLL_IVA,
	OMAP4430_DPLL_BYP_CLKSEL_SHIFT,
	OMAP4430_DPLL_BYP_CLKSEL_WIDTH,
	0x0,
	NULL);

/* DPLL_IVA */
static struct dpll_data dpll_iva_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_IVA,
	.clk_bypass	= &iva_hsd_byp_clk_mux_ck,
	.clk_ref	= &sys_clkin_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_IVA,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_IVA,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_IVA,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.max_multiplier	= 2047,
	.max_divider	= 128,
	.min_divider	= 1,
};


static const char *dpll_iva_ck_parents[] = {
	"sys_clkin_ck",
};

static struct clk dpll_iva_ck;

static const struct clk_ops dpll_iva_ck_ops = {
	.enable		= &omap3_noncore_dpll_enable,
	.disable	= &omap3_noncore_dpll_disable,
	.recalc_rate	= &omap3_dpll_recalc,
	.round_rate	= &omap2_dpll_round_rate,
	.set_rate	= &omap3_noncore_dpll_set_rate,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_iva_ck_hw = {
	.hw = {
		.clk = &dpll_iva_ck,
	},
	.dpll_data	= &dpll_iva_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_iva_ck = {
	.name		= "dpll_iva_ck",
	.ops		= &dpll_iva_ck_ops,
	.hw		= &dpll_iva_ck_hw.hw,
	.parent_names = dpll_iva_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_iva_ck_parents),
};

static const char *dpll_iva_x2_ck_parents[] = {
	"dpll_iva_ck",
};

static struct clk dpll_iva_x2_ck;

static const struct clk_ops dpll_iva_x2_ck_ops = {
	.recalc_rate	= &omap3_clkoutx2_recalc,
};

static struct clk_hw_omap dpll_iva_x2_ck_hw = {
	.hw = {
		.clk = &dpll_iva_x2_ck,
	},
};

static struct clk dpll_iva_x2_ck = {
	.name		= "dpll_iva_x2_ck",
	.ops		= &dpll_iva_x2_ck_ops,
	.hw		= &dpll_iva_x2_ck_hw.hw,
	.parent_names = dpll_iva_x2_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_iva_x2_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_iva_m4x2_ck,
	"dpll_iva_x2_ck",
	&dpll_iva_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M4_DPLL_IVA,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_iva_m5x2_ck,
	"dpll_iva_x2_ck",
	&dpll_iva_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M5_DPLL_IVA,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

/* DPLL_MPU */
static struct dpll_data dpll_mpu_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_MPU,
	.clk_bypass	= &div_mpu_hs_clk,
	.clk_ref	= &sys_clkin_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_MPU,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_MPU,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_MPU,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.max_multiplier	= 2047,
	.max_divider	= 128,
	.min_divider	= 1,
};


static const char *dpll_mpu_ck_parents[] = {
	"sys_clkin_ck",
};

static struct clk dpll_mpu_ck;

static const struct clk_ops dpll_mpu_ck_ops = {
	.enable		= &omap3_noncore_dpll_enable,
	.disable	= &omap3_noncore_dpll_disable,
	.recalc_rate	= &omap3_dpll_recalc,
	.round_rate	= &omap2_dpll_round_rate,
	.set_rate	= &omap3_noncore_dpll_set_rate,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_mpu_ck_hw = {
	.hw = {
		.clk = &dpll_mpu_ck,
	},
	.dpll_data	= &dpll_mpu_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_mpu_ck = {
	.name		= "dpll_mpu_ck",
	.ops		= &dpll_mpu_ck_ops,
	.hw		= &dpll_mpu_ck_hw.hw,
	.parent_names = dpll_mpu_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_mpu_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_mpu_m2_ck,
	"dpll_mpu_ck",
	&dpll_mpu_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_MPU,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_FIXED_FACTOR(per_hs_clk_div_ck,
	"dpll_abe_m3x2_ck",
	&dpll_abe_m3x2_ck,
	0x0,
	1, 2);

static const char *per_hsd_byp_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"per_hs_clk_div_ck",
};

DEFINE_CLK_MUX(per_hsd_byp_clk_mux_ck,
	per_hsd_byp_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_CLKSEL_DPLL_PER,
	OMAP4430_DPLL_BYP_CLKSEL_SHIFT,
	OMAP4430_DPLL_BYP_CLKSEL_WIDTH,
	0x0,
	NULL);

/* DPLL_PER */
static struct dpll_data dpll_per_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_PER,
	.clk_bypass	= &per_hsd_byp_clk_mux_ck,
	.clk_ref	= &sys_clkin_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_PER,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_PER,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_PER,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.max_multiplier	= 2047,
	.max_divider	= 128,
	.min_divider	= 1,
};


static const char *dpll_per_ck_parents[] = {
	"sys_clkin_ck",
};

static struct clk dpll_per_ck;

static const struct clk_ops dpll_per_ck_ops = {
	.enable		= &omap3_noncore_dpll_enable,
	.disable	= &omap3_noncore_dpll_disable,
	.recalc_rate	= &omap3_dpll_recalc,
	.round_rate	= &omap2_dpll_round_rate,
	.set_rate	= &omap3_noncore_dpll_set_rate,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_per_ck_hw = {
	.hw = {
		.clk = &dpll_per_ck,
	},
	.dpll_data	= &dpll_per_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_per_ck = {
	.name		= "dpll_per_ck",
	.ops		= &dpll_per_ck_ops,
	.hw		= &dpll_per_ck_hw.hw,
	.parent_names = dpll_per_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_per_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_per_m2_ck,
	"dpll_per_ck",
	&dpll_per_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_PER,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

static const char *dpll_per_x2_ck_parents[] = {
	"dpll_per_ck",
};

static struct clk dpll_per_x2_ck;

static const struct clk_ops dpll_per_x2_ck_ops = {
	.recalc_rate	= &omap3_clkoutx2_recalc,
};

static struct clk_hw_omap dpll_per_x2_ck_hw = {
	.hw = {
		.clk = &dpll_per_x2_ck,
	},
	.flags		= CLOCK_CLKOUTX2,
	.clksel_reg	= OMAP4430_CM_DIV_M2_DPLL_PER,
	.allow_idle	= &omap4_dpllmx_allow_gatectrl,
	.deny_idle	= &omap4_dpllmx_deny_gatectrl,
};

static struct clk dpll_per_x2_ck = {
	.name		= "dpll_per_x2_ck",
	.ops		= &dpll_per_x2_ck_ops,
	.hw		= &dpll_per_x2_ck_hw.hw,
	.parent_names = dpll_per_x2_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_per_x2_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_per_m2x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_PER,
	OMAP4430_DPLL_CLKOUT_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_per_m3x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M3_DPLL_PER,
	OMAP4430_DPLL_CLKOUTHIF_DIV_SHIFT,
	OMAP4430_DPLL_CLKOUTHIF_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_per_m4x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M4_DPLL_PER,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT1_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_per_m5x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M5_DPLL_PER,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT2_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_per_m6x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M6_DPLL_PER,
	OMAP4430_HSDIVIDER_CLKOUT3_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT3_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_DIVIDER(dpll_per_m7x2_ck,
	"dpll_per_x2_ck",
	&dpll_per_x2_ck,
	0x0,
	OMAP4430_CM_DIV_M7_DPLL_PER,
	OMAP4430_HSDIVIDER_CLKOUT4_DIV_SHIFT,
	OMAP4430_HSDIVIDER_CLKOUT4_DIV_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

DEFINE_CLK_FIXED_FACTOR(usb_hs_clk_div_ck,
	"dpll_abe_m3x2_ck",
	&dpll_abe_m3x2_ck,
	0x0,
	1, 3);

/* DPLL_USB */
static struct dpll_data dpll_usb_dd = {
	.mult_div1_reg	= OMAP4430_CM_CLKSEL_DPLL_USB,
	.clk_bypass	= &usb_hs_clk_div_ck,
	.flags		= DPLL_J_TYPE,
	.clk_ref	= &sys_clkin_ck,
	.control_reg	= OMAP4430_CM_CLKMODE_DPLL_USB,
	.modes		= (1 << DPLL_LOW_POWER_BYPASS) | (1 << DPLL_LOCKED),
	.autoidle_reg	= OMAP4430_CM_AUTOIDLE_DPLL_USB,
	.idlest_reg	= OMAP4430_CM_IDLEST_DPLL_USB,
	.mult_mask	= OMAP4430_DPLL_MULT_MASK,
	.div1_mask	= OMAP4430_DPLL_DIV_MASK,
	.enable_mask	= OMAP4430_DPLL_EN_MASK,
	.autoidle_mask	= OMAP4430_AUTO_DPLL_MODE_MASK,
	.idlest_mask	= OMAP4430_ST_DPLL_CLK_MASK,
	.sddiv_mask	= OMAP4430_DPLL_SD_DIV_MASK,
	.max_multiplier	= 4095,
	.max_divider	= 256,
	.min_divider	= 1,
};


static const char *dpll_usb_ck_parents[] = {
	"sys_clkin_ck",
};

static struct clk dpll_usb_ck;

static const struct clk_ops dpll_usb_ck_ops = {
	.enable		= &omap3_noncore_dpll_enable,
	.disable	= &omap3_noncore_dpll_disable,
	.recalc_rate	= &omap3_dpll_recalc,
	.round_rate	= &omap2_dpll_round_rate,
	.set_rate	= &omap3_noncore_dpll_set_rate,
	.get_parent	= &omap2_init_dpll_parent,
};

static struct clk_hw_omap dpll_usb_ck_hw = {
	.hw = {
		.clk = &dpll_usb_ck,
	},
	.dpll_data	= &dpll_usb_dd,
	.allow_idle	= &omap3_dpll_allow_idle,
	.deny_idle	= &omap3_dpll_deny_idle,
};

static struct clk dpll_usb_ck = {
	.name		= "dpll_usb_ck",
	.ops		= &dpll_usb_ck_ops,
	.hw		= &dpll_usb_ck_hw.hw,
	.parent_names = dpll_usb_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_usb_ck_parents),
};

static const char *dpll_usb_clkdcoldo_ck_parents[] = {
	"dpll_usb_ck",
};

static struct clk dpll_usb_clkdcoldo_ck;

static const struct clk_ops dpll_usb_clkdcoldo_ck_ops = {
};

static struct clk_hw_omap dpll_usb_clkdcoldo_ck_hw = {
	.hw = {
		.clk = &dpll_usb_clkdcoldo_ck,
	},
	.clksel_reg	= OMAP4430_CM_CLKDCOLDO_DPLL_USB,
	.allow_idle	= &omap4_dpllmx_allow_gatectrl,
	.deny_idle	= &omap4_dpllmx_deny_gatectrl,
};

static struct clk dpll_usb_clkdcoldo_ck = {
	.name		= "dpll_usb_clkdcoldo_ck",
	.ops		= &dpll_usb_clkdcoldo_ck_ops,
	.hw		= &dpll_usb_clkdcoldo_ck_hw.hw,
	.parent_names = dpll_usb_clkdcoldo_ck_parents,
	.num_parents = ARRAY_SIZE(dpll_usb_clkdcoldo_ck_parents),
};

DEFINE_CLK_DIVIDER(dpll_usb_m2_ck,
	"dpll_usb_ck",
	&dpll_usb_ck,
	0x0,
	OMAP4430_CM_DIV_M2_DPLL_USB,
	OMAP4430_DPLL_CLKOUT_DIV_0_6_SHIFT,
	OMAP4430_DPLL_CLKOUT_DIV_0_6_WIDTH,
	CLK_DIVIDER_ONE_BASED,
	NULL);

static const char *ducati_clk_mux_ck_parent_names[] = {
	"div_core_ck",
	"dpll_per_m6x2_ck",
};

DEFINE_CLK_MUX(ducati_clk_mux_ck,
	ducati_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_CLKSEL_DUCATI_ISS_ROOT,
	OMAP4430_CLKSEL_0_0_SHIFT,
	OMAP4430_CLKSEL_0_0_WIDTH,
	0x0,
	NULL);

DEFINE_CLK_FIXED_FACTOR(func_12m_fclk,
	"dpll_per_m2x2_ck",
	&dpll_per_m2x2_ck,
	0x0,
	1, 16);

DEFINE_CLK_FIXED_FACTOR(func_24m_clk,
	"dpll_per_m2_ck",
	&dpll_per_m2_ck,
	0x0,
	1, 4);

DEFINE_CLK_FIXED_FACTOR(func_24mc_fclk,
	"dpll_per_m2x2_ck",
	&dpll_per_m2x2_ck,
	0x0,
	1, 8);

static const struct clksel_rate div2_4to8_rates[] = {
	{ .div = 4, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 8, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel func_48m_fclk_div[] = {
	{ .parent = &dpll_per_m2x2_ck, .rates = div2_4to8_rates },
	{ .parent = NULL },
};

static const char *func_48m_fclk_parents[] = {
	"dpll_per_m2x2_ck",
};

static struct clk func_48m_fclk;

static const struct clk_ops func_48m_fclk_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap func_48m_fclk_hw = {
	.hw = {
		.clk = &func_48m_fclk,
	},
	.clksel		= func_48m_fclk_div,
	.clksel_reg	= OMAP4430_CM_SCALE_FCLK,
	.clksel_mask	= OMAP4430_SCALE_FCLK_MASK,
};

static struct clk func_48m_fclk = {
	.name		= "func_48m_fclk",
	.ops		= &func_48m_fclk_ops,
	.hw		= &func_48m_fclk_hw.hw,
	.parent_names = func_48m_fclk_parents,
	.num_parents = ARRAY_SIZE(func_48m_fclk_parents),
};

DEFINE_CLK_FIXED_FACTOR(func_48mc_fclk,
	"dpll_per_m2x2_ck",
	&dpll_per_m2x2_ck,
	0x0,
	1, 4);

static const struct clksel_rate div2_2to4_rates[] = {
	{ .div = 2, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 4, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel func_64m_fclk_div[] = {
	{ .parent = &dpll_per_m4x2_ck, .rates = div2_2to4_rates },
	{ .parent = NULL },
};

static const char *func_64m_fclk_parents[] = {
	"dpll_per_m4x2_ck",
};

static struct clk func_64m_fclk;

static const struct clk_ops func_64m_fclk_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap func_64m_fclk_hw = {
	.hw = {
		.clk = &func_64m_fclk,
	},
	.clksel		= func_64m_fclk_div,
	.clksel_reg	= OMAP4430_CM_SCALE_FCLK,
	.clksel_mask	= OMAP4430_SCALE_FCLK_MASK,
};

static struct clk func_64m_fclk = {
	.name		= "func_64m_fclk",
	.ops		= &func_64m_fclk_ops,
	.hw		= &func_64m_fclk_hw.hw,
	.parent_names = func_64m_fclk_parents,
	.num_parents = ARRAY_SIZE(func_64m_fclk_parents),
};

static const struct clksel func_96m_fclk_div[] = {
	{ .parent = &dpll_per_m2x2_ck, .rates = div2_2to4_rates },
	{ .parent = NULL },
};

static const char *func_96m_fclk_parents[] = {
	"dpll_per_m2x2_ck",
};

static struct clk func_96m_fclk;

static const struct clk_ops func_96m_fclk_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap func_96m_fclk_hw = {
	.hw = {
		.clk = &func_96m_fclk,
	},
	.clksel		= func_96m_fclk_div,
	.clksel_reg	= OMAP4430_CM_SCALE_FCLK,
	.clksel_mask	= OMAP4430_SCALE_FCLK_MASK,
};

static struct clk func_96m_fclk = {
	.name		= "func_96m_fclk",
	.ops		= &func_96m_fclk_ops,
	.hw		= &func_96m_fclk_hw.hw,
	.parent_names = func_96m_fclk_parents,
	.num_parents = ARRAY_SIZE(func_96m_fclk_parents),
};

static const struct clksel_rate div2_1to8_rates[] = {
	{ .div = 1, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 8, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel init_60m_fclk_div[] = {
	{ .parent = &dpll_usb_m2_ck, .rates = div2_1to8_rates },
	{ .parent = NULL },
};

static const char *init_60m_fclk_parents[] = {
	"dpll_usb_m2_ck",
};

static struct clk init_60m_fclk;

static const struct clk_ops init_60m_fclk_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap init_60m_fclk_hw = {
	.hw = {
		.clk = &init_60m_fclk,
	},
	.clksel		= init_60m_fclk_div,
	.clksel_reg	= OMAP4430_CM_CLKSEL_USB_60MHZ,
	.clksel_mask	= OMAP4430_CLKSEL_0_0_MASK,
};

static struct clk init_60m_fclk = {
	.name		= "init_60m_fclk",
	.ops		= &init_60m_fclk_ops,
	.hw		= &init_60m_fclk_hw.hw,
	.parent_names = init_60m_fclk_parents,
	.num_parents = ARRAY_SIZE(init_60m_fclk_parents),
};

DEFINE_CLK_DIVIDER(l3_div_ck,
	"div_core_ck",
	&div_core_ck,
	0x0,
	OMAP4430_CM_CLKSEL_CORE,
	OMAP4430_CLKSEL_L3_SHIFT,
	OMAP4430_CLKSEL_L3_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(l4_div_ck,
	"l3_div_ck",
	&l3_div_ck,
	0x0,
	OMAP4430_CM_CLKSEL_CORE,
	OMAP4430_CLKSEL_L4_SHIFT,
	OMAP4430_CLKSEL_L4_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_FIXED_FACTOR(lp_clk_div_ck,
	"dpll_abe_m2x2_ck",
	&dpll_abe_m2x2_ck,
	0x0,
	1, 16);

static const char *l4_wkup_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"lp_clk_div_ck",
};

DEFINE_CLK_MUX(l4_wkup_clk_mux_ck,
	l4_wkup_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_L4_WKUP_CLKSEL,
	OMAP4430_CLKSEL_0_0_SHIFT,
	OMAP4430_CLKSEL_0_0_WIDTH,
	0x0,
	NULL);

static const struct clksel_rate div2_2to1_rates[] = {
	{ .div = 2, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 1, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel ocp_abe_iclk_div[] = {
	{ .parent = &aess_fclk, .rates = div2_2to1_rates },
	{ .parent = NULL },
};

static const char *ocp_abe_iclk_parents[] = {
	"aess_fclk",
};

static struct clk ocp_abe_iclk;

static const struct clk_ops ocp_abe_iclk_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap ocp_abe_iclk_hw = {
	.hw = {
		.clk = &ocp_abe_iclk,
	},
	.clksel		= ocp_abe_iclk_div,
	.clksel_reg	= OMAP4430_CM1_ABE_AESS_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_AESS_FCLK_MASK,
};

static struct clk ocp_abe_iclk = {
	.name		= "ocp_abe_iclk",
	.ops		= &ocp_abe_iclk_ops,
	.hw		= &ocp_abe_iclk_hw.hw,
	.parent_names = ocp_abe_iclk_parents,
	.num_parents = ARRAY_SIZE(ocp_abe_iclk_parents),
};

DEFINE_CLK_FIXED_FACTOR(per_abe_24m_fclk,
	"dpll_abe_m2_ck",
	&dpll_abe_m2_ck,
	0x0,
	1, 4);

DEFINE_CLK_DIVIDER(per_abe_nc_fclk,
	"dpll_abe_m2_ck",
	&dpll_abe_m2_ck,
	0x0,
	OMAP4430_CM_SCALE_FCLK,
	OMAP4430_SCALE_FCLK_SHIFT,
	OMAP4430_SCALE_FCLK_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(syc_clk_div_ck,
	"sys_clkin_ck",
	&sys_clkin_ck,
	0x0,
	OMAP4430_CM_ABE_DSS_SYS_CLKSEL,
	OMAP4430_CLKSEL_0_0_SHIFT,
	OMAP4430_CLKSEL_0_0_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

/* Leaf clocks controlled by modules */

DEFINE_CLK_GATE(aes1_fck, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L4SEC_AES1_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(aes2_fck, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L4SEC_AES2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(aess_fck, "aess_fclk", &aess_fclk, 0x0,
	OMAP4430_CM1_ABE_AESS_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(bandgap_fclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_WKUP_BANDGAP_CLKCTRL, OMAP4430_OPTFCLKEN_BGAP_32K_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(des3des_fck, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4SEC_DES3DES_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

static const char *dmic_sync_mux_ck_parent_names[] = {
	"abe_24m_fclk",
	"syc_clk_div_ck",
	"func_24m_clk",
};

DEFINE_CLK_MUX(dmic_sync_mux_ck,
	dmic_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM1_ABE_DMIC_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel func_dmic_abe_gfclk_sel[] = {
	{ .parent = &dmic_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = &slimbus_clk, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *dmic_fck_parents[] = {
	"dmic_sync_mux_ck",
	"pad_clks_ck",
	"slimbus_clk",
};

/* Merged func_dmic_abe_gfclk into dmic */
static struct clk dmic_fck;

static const struct clk_ops dmic_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap dmic_fck_hw = {
	.hw = {
		.clk = &dmic_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_DMIC_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= func_dmic_abe_gfclk_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_DMIC_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_MASK,
};

static struct clk dmic_fck = {
	.name		= "dmic_fck",
	.ops		= &dmic_fck_ops,
	.hw		= &dmic_fck_hw.hw,
	.parent_names = dmic_fck_parents,
	.num_parents = ARRAY_SIZE(dmic_fck_parents),
};

DEFINE_CLK_GATE(dsp_fck, "dpll_iva_m4x2_ck", &dpll_iva_m4x2_ck, 0x0,
	OMAP4430_CM_TESLA_TESLA_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(dss_sys_clk, "syc_clk_div_ck", &syc_clk_div_ck, 0x0,
	OMAP4430_CM_DSS_DSS_CLKCTRL, OMAP4430_OPTFCLKEN_SYS_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(dss_tv_clk, "extalt_clkin_ck", &extalt_clkin_ck, 0x0,
	OMAP4430_CM_DSS_DSS_CLKCTRL, OMAP4430_OPTFCLKEN_TV_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(dss_dss_clk, "dpll_per_m5x2_ck", &dpll_per_m5x2_ck, 0x0,
	OMAP4430_CM_DSS_DSS_CLKCTRL, OMAP4430_OPTFCLKEN_DSSCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(dss_48mhz_clk, "func_48mc_fclk", &func_48mc_fclk, 0x0,
	OMAP4430_CM_DSS_DSS_CLKCTRL, OMAP4430_OPTFCLKEN_48MHZ_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(dss_fck, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_DSS_DSS_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(efuse_ctrl_cust_fck, "sys_clkin_ck", &sys_clkin_ck, 0x0,
	OMAP4430_CM_CEFUSE_CEFUSE_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(emif1_fck, "ddrphy_ck", &ddrphy_ck, 0x0,
	OMAP4430_CM_MEMIF_EMIF_1_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(emif2_fck, "ddrphy_ck", &ddrphy_ck, 0x0,
	OMAP4430_CM_MEMIF_EMIF_2_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_DIVIDER(fdif_fclk,
	"dpll_per_m4x2_ck",
	&dpll_per_m4x2_ck,
	0x0,
	OMAP4430_CM_CAM_FDIF_CLKCTRL,
	OMAP4430_CLKSEL_FCLK_SHIFT,
	OMAP4430_CLKSEL_FCLK_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_GATE(fpka_fck, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4SEC_PKAEIP29_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio1_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_WKUP_GPIO1_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio1_ick, "l4_wkup_clk_mux_ck", &l4_wkup_clk_mux_ck, 0x0,
	OMAP4430_CM_WKUP_GPIO1_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio2_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO2_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio2_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO2_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio3_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO3_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio3_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO3_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio4_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO4_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio4_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO4_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio5_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO5_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio5_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO5_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio6_dbclk, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO6_CLKCTRL, OMAP4430_OPTFCLKEN_DBCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpio6_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_GPIO6_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(gpmc_ick, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L3_2_GPMC_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

static const struct clksel sgx_clk_mux_sel[] = {
	{ .parent = &dpll_core_m7x2_ck, .rates = div_1_0_rates },
	{ .parent = &dpll_per_m7x2_ck, .rates = div_1_1_rates },
	{ .parent = NULL },
};

static const char *gpu_fck_parents[] = {
	"dpll_core_m7x2_ck",
	"dpll_per_m7x2_ck",
};

/* Merged sgx_clk_mux into gpu */
static struct clk gpu_fck;

static const struct clk_ops gpu_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap gpu_fck_hw = {
	.hw = {
		.clk = &gpu_fck,
	},
	.clkdm_name	= "l3_gfx_clkdm",
	.enable_reg	= OMAP4430_CM_GFX_GFX_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= sgx_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_GFX_GFX_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SGX_FCLK_MASK,
};

static struct clk gpu_fck = {
	.name		= "gpu_fck",
	.ops		= &gpu_fck_ops,
	.hw		= &gpu_fck_hw.hw,
	.parent_names = gpu_fck_parents,
	.num_parents = ARRAY_SIZE(gpu_fck_parents),
};

DEFINE_CLK_GATE(hdq1w_fck, "func_12m_fclk", &func_12m_fclk, 0x0,
	OMAP4430_CM_L4PER_HDQ1W_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_DIVIDER(hsi_fclk,
	"dpll_per_m2x2_ck",
	&dpll_per_m2x2_ck,
	0x0,
	OMAP4430_CM_L3INIT_HSI_CLKCTRL,
	OMAP4430_CLKSEL_24_25_SHIFT,
	OMAP4430_CLKSEL_24_25_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_GATE(i2c1_fck, "func_96m_fclk", &func_96m_fclk, 0x0,
	OMAP4430_CM_L4PER_I2C1_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(i2c2_fck, "func_96m_fclk", &func_96m_fclk, 0x0,
	OMAP4430_CM_L4PER_I2C2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(i2c3_fck, "func_96m_fclk", &func_96m_fclk, 0x0,
	OMAP4430_CM_L4PER_I2C3_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(i2c4_fck, "func_96m_fclk", &func_96m_fclk, 0x0,
	OMAP4430_CM_L4PER_I2C4_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(ipu_fck, "ducati_clk_mux_ck", &ducati_clk_mux_ck, 0x0,
	OMAP4430_CM_DUCATI_DUCATI_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(iss_ctrlclk, "func_96m_fclk", &func_96m_fclk, 0x0,
	OMAP4430_CM_CAM_ISS_CLKCTRL, OMAP4430_OPTFCLKEN_CTRLCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(iss_fck, "ducati_clk_mux_ck", &ducati_clk_mux_ck, 0x0,
	OMAP4430_CM_CAM_ISS_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(iva_fck, "dpll_iva_m5x2_ck", &dpll_iva_m5x2_ck, 0x0,
	OMAP4430_CM_IVAHD_IVAHD_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(kbd_fck, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_WKUP_KEYBOARD_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(l3_instr_ick, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L3INSTR_L3_INSTR_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(l3_main_3_ick, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L3INSTR_L3_3_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

static const char *mcasp_sync_mux_ck_parent_names[] = {
	"abe_24m_fclk",
	"syc_clk_div_ck",
	"func_24m_clk",
};

DEFINE_CLK_MUX(mcasp_sync_mux_ck,
	mcasp_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM1_ABE_MCASP_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel func_mcasp_abe_gfclk_sel[] = {
	{ .parent = &mcasp_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = &slimbus_clk, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *mcasp_fck_parents[] = {
	"mcasp_sync_mux_ck",
	"pad_clks_ck",
	"slimbus_clk",
};

/* Merged func_mcasp_abe_gfclk into mcasp */
static struct clk mcasp_fck;

static const struct clk_ops mcasp_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mcasp_fck_hw = {
	.hw = {
		.clk = &mcasp_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_MCASP_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= func_mcasp_abe_gfclk_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_MCASP_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_MASK,
};

static struct clk mcasp_fck = {
	.name		= "mcasp_fck",
	.ops		= &mcasp_fck_ops,
	.hw		= &mcasp_fck_hw.hw,
	.parent_names = mcasp_fck_parents,
	.num_parents = ARRAY_SIZE(mcasp_fck_parents),
};

static const char *mcbsp1_sync_mux_ck_parent_names[] = {
	"abe_24m_fclk",
	"syc_clk_div_ck",
	"func_24m_clk",
};

DEFINE_CLK_MUX(mcbsp1_sync_mux_ck,
	mcbsp1_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM1_ABE_MCBSP1_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel func_mcbsp1_gfclk_sel[] = {
	{ .parent = &mcbsp1_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = &slimbus_clk, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *mcbsp1_fck_parents[] = {
	"mcbsp1_sync_mux_ck",
	"pad_clks_ck",
	"slimbus_clk",
};

/* Merged func_mcbsp1_gfclk into mcbsp1 */
static struct clk mcbsp1_fck;

static const struct clk_ops mcbsp1_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mcbsp1_fck_hw = {
	.hw = {
		.clk = &mcbsp1_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_MCBSP1_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= func_mcbsp1_gfclk_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_MCBSP1_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_MASK,
};

static struct clk mcbsp1_fck = {
	.name		= "mcbsp1_fck",
	.ops		= &mcbsp1_fck_ops,
	.hw		= &mcbsp1_fck_hw.hw,
	.parent_names = mcbsp1_fck_parents,
	.num_parents = ARRAY_SIZE(mcbsp1_fck_parents),
};

static const char *mcbsp2_sync_mux_ck_parent_names[] = {
	"abe_24m_fclk",
	"syc_clk_div_ck",
	"func_24m_clk",
};

DEFINE_CLK_MUX(mcbsp2_sync_mux_ck,
	mcbsp2_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM1_ABE_MCBSP2_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel func_mcbsp2_gfclk_sel[] = {
	{ .parent = &mcbsp2_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = &slimbus_clk, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *mcbsp2_fck_parents[] = {
	"mcbsp2_sync_mux_ck",
	"pad_clks_ck",
	"slimbus_clk",
};

/* Merged func_mcbsp2_gfclk into mcbsp2 */
static struct clk mcbsp2_fck;

static const struct clk_ops mcbsp2_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mcbsp2_fck_hw = {
	.hw = {
		.clk = &mcbsp2_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_MCBSP2_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= func_mcbsp2_gfclk_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_MCBSP2_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_MASK,
};

static struct clk mcbsp2_fck = {
	.name		= "mcbsp2_fck",
	.ops		= &mcbsp2_fck_ops,
	.hw		= &mcbsp2_fck_hw.hw,
	.parent_names = mcbsp2_fck_parents,
	.num_parents = ARRAY_SIZE(mcbsp2_fck_parents),
};

static const char *mcbsp3_sync_mux_ck_parent_names[] = {
	"abe_24m_fclk",
	"syc_clk_div_ck",
	"func_24m_clk",
};

DEFINE_CLK_MUX(mcbsp3_sync_mux_ck,
	mcbsp3_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM1_ABE_MCBSP3_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel func_mcbsp3_gfclk_sel[] = {
	{ .parent = &mcbsp3_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = &slimbus_clk, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *mcbsp3_fck_parents[] = {
	"mcbsp3_sync_mux_ck",
	"pad_clks_ck",
	"slimbus_clk",
};

/* Merged func_mcbsp3_gfclk into mcbsp3 */
static struct clk mcbsp3_fck;

static const struct clk_ops mcbsp3_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mcbsp3_fck_hw = {
	.hw = {
		.clk = &mcbsp3_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_MCBSP3_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= func_mcbsp3_gfclk_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_MCBSP3_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_MASK,
};

static struct clk mcbsp3_fck = {
	.name		= "mcbsp3_fck",
	.ops		= &mcbsp3_fck_ops,
	.hw		= &mcbsp3_fck_hw.hw,
	.parent_names = mcbsp3_fck_parents,
	.num_parents = ARRAY_SIZE(mcbsp3_fck_parents),
};

static const char *mcbsp4_sync_mux_ck_parent_names[] = {
	"func_96m_fclk",
	"per_abe_nc_fclk",
};

DEFINE_CLK_MUX(mcbsp4_sync_mux_ck,
	mcbsp4_sync_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_L4PER_MCBSP4_CLKCTRL,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_SHIFT,
	OMAP4430_CLKSEL_INTERNAL_SOURCE_WIDTH,
	0x0,
	NULL);

static const struct clksel per_mcbsp4_gfclk_sel[] = {
	{ .parent = &mcbsp4_sync_mux_ck, .rates = div_1_0_rates },
	{ .parent = &pad_clks_ck, .rates = div_1_1_rates },
	{ .parent = NULL },
};

static const char *mcbsp4_fck_parents[] = {
	"mcbsp4_sync_mux_ck",
	"pad_clks_ck",
};

/* Merged per_mcbsp4_gfclk into mcbsp4 */
static struct clk mcbsp4_fck;

static const struct clk_ops mcbsp4_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mcbsp4_fck_hw = {
	.hw = {
		.clk = &mcbsp4_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_MCBSP4_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= per_mcbsp4_gfclk_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_MCBSP4_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_SOURCE_24_24_MASK,
};

static struct clk mcbsp4_fck = {
	.name		= "mcbsp4_fck",
	.ops		= &mcbsp4_fck_ops,
	.hw		= &mcbsp4_fck_hw.hw,
	.parent_names = mcbsp4_fck_parents,
	.num_parents = ARRAY_SIZE(mcbsp4_fck_parents),
};

DEFINE_CLK_GATE(mcpdm_fck, "pad_clks_ck", &pad_clks_ck, 0x0,
	OMAP4430_CM1_ABE_PDM_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mcspi1_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MCSPI1_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mcspi2_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MCSPI2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mcspi3_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MCSPI3_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mcspi4_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MCSPI4_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

static const struct clksel hsmmc1_fclk_sel[] = {
	{ .parent = &func_64m_fclk, .rates = div_1_0_rates },
	{ .parent = &func_96m_fclk, .rates = div_1_1_rates },
	{ .parent = NULL },
};

static const char *mmc1_fck_parents[] = {
	"func_64m_fclk",
	"func_96m_fclk",
};

/* Merged hsmmc1_fclk into mmc1 */
static struct clk mmc1_fck;

static const struct clk_ops mmc1_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mmc1_fck_hw = {
	.hw = {
		.clk = &mmc1_fck,
	},
	.clkdm_name	= "l3_init_clkdm",
	.enable_reg	= OMAP4430_CM_L3INIT_MMC1_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= hsmmc1_fclk_sel,
	.clksel_reg	= OMAP4430_CM_L3INIT_MMC1_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk mmc1_fck = {
	.name		= "mmc1_fck",
	.ops		= &mmc1_fck_ops,
	.hw		= &mmc1_fck_hw.hw,
	.parent_names = mmc1_fck_parents,
	.num_parents = ARRAY_SIZE(mmc1_fck_parents),
};

static const char *mmc2_fck_parents[] = {
	"func_64m_fclk",
	"func_96m_fclk",
};

/* Merged hsmmc2_fclk into mmc2 */
static struct clk mmc2_fck;

static const struct clk_ops mmc2_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap mmc2_fck_hw = {
	.hw = {
		.clk = &mmc2_fck,
	},
	.clkdm_name	= "l3_init_clkdm",
	.enable_reg	= OMAP4430_CM_L3INIT_MMC2_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= hsmmc1_fclk_sel,
	.clksel_reg	= OMAP4430_CM_L3INIT_MMC2_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk mmc2_fck = {
	.name		= "mmc2_fck",
	.ops		= &mmc2_fck_ops,
	.hw		= &mmc2_fck_hw.hw,
	.parent_names = mmc2_fck_parents,
	.num_parents = ARRAY_SIZE(mmc2_fck_parents),
};

DEFINE_CLK_GATE(mmc3_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MMCSD3_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mmc4_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MMCSD4_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(mmc5_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_MMCSD5_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(ocp2scp_usb_phy_phy_48m, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USBPHYOCP2SCP_CLKCTRL, OMAP4430_OPTFCLKEN_PHY_48M_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(ocp2scp_usb_phy_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L3INIT_USBPHYOCP2SCP_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(ocp_wp_noc_ick, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L3INSTR_OCP_WP1_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(rng_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4SEC_RNG_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(sha2md5_fck, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L4SEC_SHA2MD51_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(sl2if_ick, "dpll_iva_m5x2_ck", &dpll_iva_m5x2_ck, 0x0,
	OMAP4430_CM_IVAHD_SL2_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus1_fclk_1, "func_24m_clk", &func_24m_clk, 0x0,
	OMAP4430_CM1_ABE_SLIMBUS_CLKCTRL, OMAP4430_OPTFCLKEN_FCLK1_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus1_fclk_0, "abe_24m_fclk", &abe_24m_fclk, 0x0,
	OMAP4430_CM1_ABE_SLIMBUS_CLKCTRL, OMAP4430_OPTFCLKEN_FCLK0_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus1_fclk_2, "pad_clks_ck", &pad_clks_ck, 0x0,
	OMAP4430_CM1_ABE_SLIMBUS_CLKCTRL, OMAP4430_OPTFCLKEN_FCLK2_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus1_slimbus_clk, "slimbus_clk", &slimbus_clk, 0x0,
	OMAP4430_CM1_ABE_SLIMBUS_CLKCTRL, OMAP4430_OPTFCLKEN_SLIMBUS_CLK_11_11_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus1_fck, "ocp_abe_iclk", &ocp_abe_iclk, 0x0,
	OMAP4430_CM1_ABE_SLIMBUS_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus2_fclk_1, "per_abe_24m_fclk", &per_abe_24m_fclk, 0x0,
	OMAP4430_CM_L4PER_SLIMBUS2_CLKCTRL, OMAP4430_OPTFCLKEN_PERABE24M_GFCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus2_fclk_0, "func_24mc_fclk", &func_24mc_fclk, 0x0,
	OMAP4430_CM_L4PER_SLIMBUS2_CLKCTRL, OMAP4430_OPTFCLKEN_PER24MC_GFCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus2_slimbus_clk, "pad_slimbus_core_clks_ck", &pad_slimbus_core_clks_ck, 0x0,
	OMAP4430_CM_L4PER_SLIMBUS2_CLKCTRL, OMAP4430_OPTFCLKEN_SLIMBUS_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(slimbus2_fck, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L4PER_SLIMBUS2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(smartreflex_core_fck, "l4_wkup_clk_mux_ck", &l4_wkup_clk_mux_ck, 0x0,
	OMAP4430_CM_ALWON_SR_CORE_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(smartreflex_iva_fck, "l4_wkup_clk_mux_ck", &l4_wkup_clk_mux_ck, 0x0,
	OMAP4430_CM_ALWON_SR_IVA_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(smartreflex_mpu_fck, "l4_wkup_clk_mux_ck", &l4_wkup_clk_mux_ck, 0x0,
	OMAP4430_CM_ALWON_SR_MPU_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

static const struct clksel dmt1_clk_mux_sel[] = {
	{ .parent = &sys_clkin_ck, .rates = div_1_0_rates },
	{ .parent = &sys_32k_ck, .rates = div_1_1_rates },
	{ .parent = NULL },
};

static const char *timer1_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged dmt1_clk_mux into timer1 */
static struct clk timer1_fck;

static const struct clk_ops timer1_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer1_fck_hw = {
	.hw = {
		.clk = &timer1_fck,
	},
	.clkdm_name	= "l4_wkup_clkdm",
	.enable_reg	= OMAP4430_CM_WKUP_TIMER1_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_WKUP_TIMER1_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer1_fck = {
	.name		= "timer1_fck",
	.ops		= &timer1_fck_ops,
	.hw		= &timer1_fck_hw.hw,
	.parent_names = timer1_fck_parents,
	.num_parents = ARRAY_SIZE(timer1_fck_parents),
};

static const char *timer10_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm10_mux into timer10 */
static struct clk timer10_fck;

static const struct clk_ops timer10_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer10_fck_hw = {
	.hw = {
		.clk = &timer10_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER10_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER10_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer10_fck = {
	.name		= "timer10_fck",
	.ops		= &timer10_fck_ops,
	.hw		= &timer10_fck_hw.hw,
	.parent_names = timer10_fck_parents,
	.num_parents = ARRAY_SIZE(timer10_fck_parents),
};

static const char *timer11_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm11_mux into timer11 */
static struct clk timer11_fck;

static const struct clk_ops timer11_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer11_fck_hw = {
	.hw = {
		.clk = &timer11_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER11_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER11_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer11_fck = {
	.name		= "timer11_fck",
	.ops		= &timer11_fck_ops,
	.hw		= &timer11_fck_hw.hw,
	.parent_names = timer11_fck_parents,
	.num_parents = ARRAY_SIZE(timer11_fck_parents),
};

static const char *timer2_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm2_mux into timer2 */
static struct clk timer2_fck;

static const struct clk_ops timer2_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer2_fck_hw = {
	.hw = {
		.clk = &timer2_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER2_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER2_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer2_fck = {
	.name		= "timer2_fck",
	.ops		= &timer2_fck_ops,
	.hw		= &timer2_fck_hw.hw,
	.parent_names = timer2_fck_parents,
	.num_parents = ARRAY_SIZE(timer2_fck_parents),
};

static const char *timer3_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm3_mux into timer3 */
static struct clk timer3_fck;

static const struct clk_ops timer3_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer3_fck_hw = {
	.hw = {
		.clk = &timer3_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER3_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER3_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer3_fck = {
	.name		= "timer3_fck",
	.ops		= &timer3_fck_ops,
	.hw		= &timer3_fck_hw.hw,
	.parent_names = timer3_fck_parents,
	.num_parents = ARRAY_SIZE(timer3_fck_parents),
};

static const char *timer4_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm4_mux into timer4 */
static struct clk timer4_fck;

static const struct clk_ops timer4_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer4_fck_hw = {
	.hw = {
		.clk = &timer4_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER4_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER4_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer4_fck = {
	.name		= "timer4_fck",
	.ops		= &timer4_fck_ops,
	.hw		= &timer4_fck_hw.hw,
	.parent_names = timer4_fck_parents,
	.num_parents = ARRAY_SIZE(timer4_fck_parents),
};

static const struct clksel timer5_sync_mux_sel[] = {
	{ .parent = &syc_clk_div_ck, .rates = div_1_0_rates },
	{ .parent = &sys_32k_ck, .rates = div_1_1_rates },
	{ .parent = NULL },
};

static const char *timer5_fck_parents[] = {
	"syc_clk_div_ck",
	"sys_32k_ck",
};

/* Merged timer5_sync_mux into timer5 */
static struct clk timer5_fck;

static const struct clk_ops timer5_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer5_fck_hw = {
	.hw = {
		.clk = &timer5_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_TIMER5_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= timer5_sync_mux_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_TIMER5_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer5_fck = {
	.name		= "timer5_fck",
	.ops		= &timer5_fck_ops,
	.hw		= &timer5_fck_hw.hw,
	.parent_names = timer5_fck_parents,
	.num_parents = ARRAY_SIZE(timer5_fck_parents),
};

static const char *timer6_fck_parents[] = {
	"syc_clk_div_ck",
	"sys_32k_ck",
};

/* Merged timer6_sync_mux into timer6 */
static struct clk timer6_fck;

static const struct clk_ops timer6_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer6_fck_hw = {
	.hw = {
		.clk = &timer6_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_TIMER6_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= timer5_sync_mux_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_TIMER6_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer6_fck = {
	.name		= "timer6_fck",
	.ops		= &timer6_fck_ops,
	.hw		= &timer6_fck_hw.hw,
	.parent_names = timer6_fck_parents,
	.num_parents = ARRAY_SIZE(timer6_fck_parents),
};

static const char *timer7_fck_parents[] = {
	"syc_clk_div_ck",
	"sys_32k_ck",
};

/* Merged timer7_sync_mux into timer7 */
static struct clk timer7_fck;

static const struct clk_ops timer7_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer7_fck_hw = {
	.hw = {
		.clk = &timer7_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_TIMER7_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= timer5_sync_mux_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_TIMER7_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer7_fck = {
	.name		= "timer7_fck",
	.ops		= &timer7_fck_ops,
	.hw		= &timer7_fck_hw.hw,
	.parent_names = timer7_fck_parents,
	.num_parents = ARRAY_SIZE(timer7_fck_parents),
};

static const char *timer8_fck_parents[] = {
	"syc_clk_div_ck",
	"sys_32k_ck",
};

/* Merged timer8_sync_mux into timer8 */
static struct clk timer8_fck;

static const struct clk_ops timer8_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer8_fck_hw = {
	.hw = {
		.clk = &timer8_fck,
	},
	.clkdm_name	= "abe_clkdm",
	.enable_reg	= OMAP4430_CM1_ABE_TIMER8_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= timer5_sync_mux_sel,
	.clksel_reg	= OMAP4430_CM1_ABE_TIMER8_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer8_fck = {
	.name		= "timer8_fck",
	.ops		= &timer8_fck_ops,
	.hw		= &timer8_fck_hw.hw,
	.parent_names = timer8_fck_parents,
	.num_parents = ARRAY_SIZE(timer8_fck_parents),
};

static const char *timer9_fck_parents[] = {
	"sys_clkin_ck",
	"sys_32k_ck",
};

/* Merged cm2_dm9_mux into timer9 */
static struct clk timer9_fck;

static const struct clk_ops timer9_fck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
	.set_parent	= &omap2_clksel_set_parent,
	.init	= &omap2_init_clk_clkdm,
};

static struct clk_hw_omap timer9_fck_hw = {
	.hw = {
		.clk = &timer9_fck,
	},
	.clkdm_name	= "l4_per_clkdm",
	.enable_reg	= OMAP4430_CM_L4PER_DMTIMER9_CLKCTRL,
	.enable_bit	= OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	.clksel		= dmt1_clk_mux_sel,
	.clksel_reg	= OMAP4430_CM_L4PER_DMTIMER9_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_MASK,
};

static struct clk timer9_fck = {
	.name		= "timer9_fck",
	.ops		= &timer9_fck_ops,
	.hw		= &timer9_fck_hw.hw,
	.parent_names = timer9_fck_parents,
	.num_parents = ARRAY_SIZE(timer9_fck_parents),
};

DEFINE_CLK_GATE(uart1_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_UART1_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(uart2_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_UART2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(uart3_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_UART3_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(uart4_fck, "func_48m_fclk", &func_48m_fclk, 0x0,
	OMAP4430_CM_L4PER_UART4_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_fs_fck, "func_48mc_fclk", &func_48mc_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_FS_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

static const char *utmi_p1_gfclk_parent_names[] = {
	"init_60m_fclk",
	"xclk60mhsp1_ck",
};

DEFINE_CLK_MUX(utmi_p1_gfclk,
	utmi_p1_gfclk_parent_names, NULL,
	0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL,
	OMAP4430_CLKSEL_UTMI_P1_SHIFT,
	OMAP4430_CLKSEL_UTMI_P1_WIDTH,
	0x0,
	NULL);

DEFINE_CLK_GATE(usb_host_hs_utmi_p1_clk, "utmi_p1_gfclk", &utmi_p1_gfclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_UTMI_P1_CLK_SHIFT,
	0x0, NULL);

static const char *utmi_p2_gfclk_parent_names[] = {
	"init_60m_fclk",
	"xclk60mhsp2_ck",
};

DEFINE_CLK_MUX(utmi_p2_gfclk,
	utmi_p2_gfclk_parent_names, NULL,
	0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL,
	OMAP4430_CLKSEL_UTMI_P2_SHIFT,
	OMAP4430_CLKSEL_UTMI_P2_WIDTH,
	0x0,
	NULL);

DEFINE_CLK_GATE(usb_host_hs_utmi_p2_clk, "utmi_p2_gfclk", &utmi_p2_gfclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_UTMI_P2_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_utmi_p3_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_UTMI_P3_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_hsic480m_p1_clk, "dpll_usb_m2_ck", &dpll_usb_m2_ck, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_HSIC480M_P1_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_hsic60m_p1_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_HSIC60M_P1_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_hsic60m_p2_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_HSIC60M_P2_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_hsic480m_p2_clk, "dpll_usb_m2_ck", &dpll_usb_m2_ck, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_HSIC480M_P2_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_func48mclk, "func_48mc_fclk", &func_48mc_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_OPTFCLKEN_FUNC48MCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_host_hs_fck, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_HOST_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

static const char *otg_60m_gfclk_parent_names[] = {
	"utmi_phy_clkout_ck",
	"xclk60motg_ck",
};

DEFINE_CLK_MUX(otg_60m_gfclk,
	otg_60m_gfclk_parent_names, NULL,
	0x0,
	OMAP4430_CM_L3INIT_USB_OTG_CLKCTRL,
	OMAP4430_CLKSEL_60M_SHIFT,
	OMAP4430_CLKSEL_60M_WIDTH,
	0x0,
	NULL);

DEFINE_CLK_GATE(usb_otg_hs_xclk, "otg_60m_gfclk", &otg_60m_gfclk, 0x0,
	OMAP4430_CM_L3INIT_USB_OTG_CLKCTRL, OMAP4430_OPTFCLKEN_XCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_otg_hs_ick, "l3_div_ck", &l3_div_ck, 0x0,
	OMAP4430_CM_L3INIT_USB_OTG_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_phy_cm_clk32k, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_ALWON_USBPHY_CLKCTRL, OMAP4430_OPTFCLKEN_CLK32K_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_tll_hs_usb_ch2_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_TLL_CLKCTRL, OMAP4430_OPTFCLKEN_USB_CH2_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_tll_hs_usb_ch0_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_TLL_CLKCTRL, OMAP4430_OPTFCLKEN_USB_CH0_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_tll_hs_usb_ch1_clk, "init_60m_fclk", &init_60m_fclk, 0x0,
	OMAP4430_CM_L3INIT_USB_TLL_CLKCTRL, OMAP4430_OPTFCLKEN_USB_CH1_CLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usb_tll_hs_ick, "l4_div_ck", &l4_div_ck, 0x0,
	OMAP4430_CM_L3INIT_USB_TLL_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

static const struct clksel_rate div2_14to18_rates[] = {
	{ .div = 14, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 18, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static const struct clksel usim_fclk_div[] = {
	{ .parent = &dpll_per_m4x2_ck, .rates = div2_14to18_rates },
	{ .parent = NULL },
};

static const char *usim_ck_parents[] = {
	"dpll_per_m4x2_ck",
};

static struct clk usim_ck;

static const struct clk_ops usim_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static struct clk_hw_omap usim_ck_hw = {
	.hw = {
		.clk = &usim_ck,
	},
	.clksel		= usim_fclk_div,
	.clksel_reg	= OMAP4430_CM_WKUP_USIM_CLKCTRL,
	.clksel_mask	= OMAP4430_CLKSEL_DIV_MASK,
};

static struct clk usim_ck = {
	.name		= "usim_ck",
	.ops		= &usim_ck_ops,
	.hw		= &usim_ck_hw.hw,
	.parent_names = usim_ck_parents,
	.num_parents = ARRAY_SIZE(usim_ck_parents),
};

DEFINE_CLK_GATE(usim_fclk, "usim_ck", &usim_ck, 0x0,
	OMAP4430_CM_WKUP_USIM_CLKCTRL, OMAP4430_OPTFCLKEN_FCLK_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(usim_fck, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_WKUP_USIM_CLKCTRL, OMAP4430_MODULEMODE_HWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(wd_timer2_fck, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM_WKUP_WDT2_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

DEFINE_CLK_GATE(wd_timer3_fck, "sys_32k_ck", &sys_32k_ck, 0x0,
	OMAP4430_CM1_ABE_WDT3_CLKCTRL, OMAP4430_MODULEMODE_SWCTRL_SHIFT,
	0x0, NULL);

/* Remaining optional clocks */
static const char *pmd_stm_clock_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"dpll_core_m6x2_ck",
	"tie_low_clock_ck",
};

DEFINE_CLK_MUX(pmd_stm_clock_mux_ck,
	pmd_stm_clock_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_EMU_DEBUGSS_CLKCTRL,
	OMAP4430_PMD_STM_MUX_CTRL_SHIFT,
	OMAP4430_PMD_STM_MUX_CTRL_WIDTH,
	0x0,
	NULL);

static const char *pmd_trace_clk_mux_ck_parent_names[] = {
	"sys_clkin_ck",
	"dpll_core_m6x2_ck",
	"tie_low_clock_ck",
};

DEFINE_CLK_MUX(pmd_trace_clk_mux_ck,
	pmd_trace_clk_mux_ck_parent_names, NULL,
	0x0,
	OMAP4430_CM_EMU_DEBUGSS_CLKCTRL,
	OMAP4430_PMD_TRACE_MUX_CTRL_SHIFT,
	OMAP4430_PMD_TRACE_MUX_CTRL_WIDTH,
	0x0,
	NULL);

DEFINE_CLK_DIVIDER(stm_clk_div_ck,
	"pmd_stm_clock_mux_ck",
	&pmd_stm_clock_mux_ck,
	0x0,
	OMAP4430_CM_EMU_DEBUGSS_CLKCTRL,
	OMAP4430_CLKSEL_PMD_STM_CLK_SHIFT,
	OMAP4430_CLKSEL_PMD_STM_CLK_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

DEFINE_CLK_DIVIDER(trace_clk_div_ck,
	"pmd_trace_clk_mux_ck",
	&pmd_trace_clk_mux_ck,
	0x0,
	OMAP4430_CM_EMU_DEBUGSS_CLKCTRL,
	OMAP4430_CLKSEL_PMD_TRACE_CLK_SHIFT,
	OMAP4430_CLKSEL_PMD_TRACE_CLK_WIDTH,
	CLK_DIVIDER_POWER_OF_TWO,
	NULL);

/* SCRM aux clk nodes */

static const struct clksel auxclk_src_sel[] = {
	{ .parent = &sys_clkin_ck, .rates = div_1_0_rates },
	{ .parent = &dpll_core_m3x2_ck, .rates = div_1_1_rates },
	{ .parent = &dpll_per_m3x2_ck, .rates = div_1_2_rates },
	{ .parent = NULL },
};

static const char *auxclk_src_ck_parent_names[] = {
	"sys_clkin_ck",
	"dpll_core_m3x2_ck",
	"dpll_per_m3x2_ck",
};

static const struct clksel_rate div16_1to16_rates[] = {
	{ .div = 1, .val = 0, .flags = RATE_IN_4430 },
	{ .div = 2, .val = 1, .flags = RATE_IN_4430 },
	{ .div = 3, .val = 2, .flags = RATE_IN_4430 },
	{ .div = 4, .val = 3, .flags = RATE_IN_4430 },
	{ .div = 5, .val = 4, .flags = RATE_IN_4430 },
	{ .div = 6, .val = 5, .flags = RATE_IN_4430 },
	{ .div = 7, .val = 6, .flags = RATE_IN_4430 },
	{ .div = 8, .val = 7, .flags = RATE_IN_4430 },
	{ .div = 9, .val = 8, .flags = RATE_IN_4430 },
	{ .div = 10, .val = 9, .flags = RATE_IN_4430 },
	{ .div = 11, .val = 10, .flags = RATE_IN_4430 },
	{ .div = 12, .val = 11, .flags = RATE_IN_4430 },
	{ .div = 13, .val = 12, .flags = RATE_IN_4430 },
	{ .div = 14, .val = 13, .flags = RATE_IN_4430 },
	{ .div = 15, .val = 14, .flags = RATE_IN_4430 },
	{ .div = 16, .val = 15, .flags = RATE_IN_4430 },
	{ .div = 0 },
};

static struct clk auxclk0_src_ck;

static const struct clk_ops auxclk0_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk0_src_ck_hw = {
	.hw = {
		.clk = &auxclk0_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK0,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK0,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk0_src_ck = {
	.name		= "auxclk0_src_ck",
	.ops		= &auxclk0_src_ck_ops,
	.hw		= &auxclk0_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk0_sel[] = {
	{ .parent = &auxclk0_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk0_ck;

static const struct clk_ops auxclk0_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk0_ck_parent_names[] = {
	"auxclk0_src_ck",
};

static struct clk_hw_omap auxclk0_ck_hw = {
	.hw = {
		.clk = &auxclk0_ck,
	},
	.clksel		= auxclk0_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK0,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk0_ck = {
	.name		= "auxclk0_ck",
	.ops		= &auxclk0_ck_ops,
	.hw		= &auxclk0_ck_hw.hw,
	.parent_names	= auxclk0_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk0_ck_parent_names),
};

static struct clk auxclk1_src_ck;

static const struct clk_ops auxclk1_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk1_src_ck_hw = {
	.hw = {
		.clk = &auxclk1_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK1,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK1,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk1_src_ck = {
	.name		= "auxclk1_src_ck",
	.ops		= &auxclk1_src_ck_ops,
	.hw		= &auxclk1_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk1_sel[] = {
	{ .parent = &auxclk1_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk1_ck;

static const struct clk_ops auxclk1_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk1_ck_parent_names[] = {
	"auxclk1_src_ck",
};

static struct clk_hw_omap auxclk1_ck_hw = {
	.hw = {
		.clk = &auxclk1_ck,
	},
	.clksel		= auxclk1_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK1,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk1_ck = {
	.name		= "auxclk1_ck",
	.ops		= &auxclk1_ck_ops,
	.hw		= &auxclk1_ck_hw.hw,
	.parent_names	= auxclk1_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk1_ck_parent_names),
};

static struct clk auxclk2_src_ck;

static const struct clk_ops auxclk2_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk2_src_ck_hw = {
	.hw = {
		.clk = &auxclk2_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK2,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK2,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk2_src_ck = {
	.name		= "auxclk2_src_ck",
	.ops		= &auxclk2_src_ck_ops,
	.hw		= &auxclk2_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk2_sel[] = {
	{ .parent = &auxclk2_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk2_ck;

static const struct clk_ops auxclk2_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk2_ck_parent_names[] = {
	"auxclk2_src_ck",
};

static struct clk_hw_omap auxclk2_ck_hw = {
	.hw = {
		.clk = &auxclk2_ck,
	},
	.clksel		= auxclk2_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK2,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk2_ck = {
	.name		= "auxclk2_ck",
	.ops		= &auxclk2_ck_ops,
	.hw		= &auxclk2_ck_hw.hw,
	.parent_names	= auxclk2_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk2_ck_parent_names),
};

static struct clk auxclk3_src_ck;

static const struct clk_ops auxclk3_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk3_src_ck_hw = {
	.hw = {
		.clk = &auxclk3_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK3,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK3,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk3_src_ck = {
	.name		= "auxclk3_src_ck",
	.ops		= &auxclk3_src_ck_ops,
	.hw		= &auxclk3_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk3_sel[] = {
	{ .parent = &auxclk3_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk3_ck;

static const struct clk_ops auxclk3_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk3_ck_parent_names[] = {
	"auxclk3_src_ck",
};

static struct clk_hw_omap auxclk3_ck_hw = {
	.hw = {
		.clk = &auxclk3_ck,
	},
	.clksel		= auxclk3_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK3,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk3_ck = {
	.name		= "auxclk3_ck",
	.ops		= &auxclk3_ck_ops,
	.hw		= &auxclk3_ck_hw.hw,
	.parent_names	= auxclk3_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk3_ck_parent_names),
};

static struct clk auxclk4_src_ck;

static const struct clk_ops auxclk4_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk4_src_ck_hw = {
	.hw = {
		.clk = &auxclk4_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK4,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK4,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk4_src_ck = {
	.name		= "auxclk4_src_ck",
	.ops		= &auxclk4_src_ck_ops,
	.hw		= &auxclk4_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk4_sel[] = {
	{ .parent = &auxclk4_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk4_ck;

static const struct clk_ops auxclk4_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk4_ck_parent_names[] = {
	"auxclk4_src_ck",
};

static struct clk_hw_omap auxclk4_ck_hw = {
	.hw = {
		.clk = &auxclk4_ck,
	},
	.clksel		= auxclk4_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK4,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk4_ck = {
	.name		= "auxclk4_ck",
	.ops		= &auxclk4_ck_ops,
	.hw		= &auxclk4_ck_hw.hw,
	.parent_names	= auxclk4_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk4_ck_parent_names),
};

static struct clk auxclk5_src_ck;

static const struct clk_ops auxclk5_src_ck_ops = {
	.enable		= &omap2_dflt_clk_enable,
	.disable	= &omap2_dflt_clk_disable,
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclk5_src_ck_hw = {
	.hw = {
		.clk = &auxclk5_src_ck,
	},
	.clksel		= auxclk_src_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK5,
	.clksel_mask	= OMAP4_SRCSELECT_MASK,
	.enable_reg	= OMAP4_SCRM_AUXCLK5,
	.enable_bit	= OMAP4_ENABLE_SHIFT,
};

static struct clk auxclk5_src_ck = {
	.name		= "auxclk5_src_ck",
	.ops		= &auxclk5_src_ck_ops,
	.hw		= &auxclk5_src_ck_hw.hw,
	.parent_names	= auxclk_src_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk_src_ck_parent_names),
};

static const struct clksel auxclk5_sel[] = {
	{ .parent = &auxclk5_src_ck, .rates = div16_1to16_rates },
	{ .parent = NULL },
};

static struct clk auxclk5_ck;

static const struct clk_ops auxclk5_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.round_rate	= &omap2_clksel_round_rate,
	.set_rate	= &omap2_clksel_set_rate,
};

static const char *auxclk5_ck_parent_names[] = {
	"auxclk5_src_ck",
};

static struct clk_hw_omap auxclk5_ck_hw = {
	.hw = {
		.clk = &auxclk5_ck,
	},
	.clksel		= auxclk5_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLK5,
	.clksel_mask	= OMAP4_CLKDIV_MASK,
};

static struct clk auxclk5_ck = {
	.name		= "auxclk5_ck",
	.ops		= &auxclk5_ck_ops,
	.hw		= &auxclk5_ck_hw.hw,
	.parent_names	= auxclk5_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclk5_ck_parent_names),
};

static const struct clksel auxclkreq_sel[] = {
	{ .parent = &auxclk0_ck, .rates = div_1_0_rates },
	{ .parent = &auxclk1_ck, .rates = div_1_1_rates },
	{ .parent = &auxclk2_ck, .rates = div_1_2_rates },
	{ .parent = &auxclk3_ck, .rates = div_1_3_rates },
	{ .parent = &auxclk4_ck, .rates = div_1_4_rates },
	{ .parent = &auxclk5_ck, .rates = div_1_5_rates },
	{ .parent = NULL },
};

static const char *auxclkreq_ck_parent_names[] = {
	"auxclk0_ck",
	"auxclk1_ck",
	"auxclk2_ck",
	"auxclk3_ck",
	"auxclk4_ck",
	"auxclk5_ck",
};

static struct clk auxclkreq0_ck;

static struct clk_ops auxclkreq0_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq0_ck_hw = {
	.hw = {
		.clk = &auxclkreq0_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ0,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq0_ck = {
	.name		= "auxclkreq0_ck",
	.ops		= &auxclkreq0_ck_ops,
	.hw		= &auxclkreq0_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

static struct clk auxclkreq1_ck;

static struct clk_ops auxclkreq1_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq1_ck_hw = {
	.hw = {
		.clk = &auxclkreq1_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ1,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq1_ck = {
	.name		= "auxclkreq1_ck",
	.ops		= &auxclkreq1_ck_ops,
	.hw		= &auxclkreq1_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

static struct clk auxclkreq2_ck;

static struct clk_ops auxclkreq2_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq2_ck_hw = {
	.hw = {
		.clk = &auxclkreq2_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ2,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq2_ck = {
	.name		= "auxclkreq2_ck",
	.ops		= &auxclkreq2_ck_ops,
	.hw		= &auxclkreq2_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

static struct clk auxclkreq3_ck;

static struct clk_ops auxclkreq3_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq3_ck_hw = {
	.hw = {
		.clk = &auxclkreq3_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ3,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq3_ck = {
	.name		= "auxclkreq3_ck",
	.ops		= &auxclkreq3_ck_ops,
	.hw		= &auxclkreq3_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

static struct clk auxclkreq4_ck;

static struct clk_ops auxclkreq4_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq4_ck_hw = {
	.hw = {
		.clk = &auxclkreq4_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ4,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq4_ck = {
	.name		= "auxclkreq4_ck",
	.ops		= &auxclkreq4_ck_ops,
	.hw		= &auxclkreq4_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

static struct clk auxclkreq5_ck;

static struct clk_ops auxclkreq5_ck_ops = {
	.recalc_rate	= &omap2_clksel_recalc,
	.get_parent	= &omap2_init_clksel_parent,
};

static struct clk_hw_omap auxclkreq5_ck_hw = {
	.hw = {
		.clk = &auxclkreq5_ck,
	},
	.clksel		= auxclkreq_sel,
	.clksel_reg	= OMAP4_SCRM_AUXCLKREQ5,
	.clksel_mask	= OMAP4_MAPPING_MASK,
};

static struct clk auxclkreq5_ck = {
	.name		= "auxclkreq5_ck",
	.ops		= &auxclkreq5_ck_ops,
	.hw		= &auxclkreq5_ck_hw.hw,
	.parent_names	= auxclkreq_ck_parent_names,
	.num_parents	= ARRAY_SIZE(auxclkreq_ck_parent_names),
};

/*
 * clkdev
 */

static struct clk_lookup omap44xx_clks[] = {
	CLKDEV_INIT(NULL, "extalt_clkin_ck",		&extalt_clkin_ck),
	CLKDEV_INIT(NULL, "pad_clks_src_ck",		&pad_clks_src_ck),
	CLKDEV_INIT(NULL, "pad_clks_ck",		&pad_clks_ck),
	CLKDEV_INIT(NULL, "pad_slimbus_core_clks_ck",	&pad_slimbus_core_clks_ck),
	CLKDEV_INIT(NULL, "secure_32k_clk_src_ck",	&secure_32k_clk_src_ck),
	CLKDEV_INIT(NULL, "slimbus_src_clk",		&slimbus_src_clk),
	CLKDEV_INIT(NULL, "slimbus_clk",		&slimbus_clk),
	CLKDEV_INIT(NULL, "sys_32k_ck",			&sys_32k_ck),
	CLKDEV_INIT(NULL, "virt_12000000_ck",		&virt_12000000_ck),
	CLKDEV_INIT(NULL, "virt_13000000_ck",		&virt_13000000_ck),
	CLKDEV_INIT(NULL, "virt_16800000_ck",		&virt_16800000_ck),
	CLKDEV_INIT(NULL, "virt_19200000_ck",		&virt_19200000_ck),
	CLKDEV_INIT(NULL, "virt_26000000_ck",		&virt_26000000_ck),
	CLKDEV_INIT(NULL, "virt_27000000_ck",		&virt_27000000_ck),
	CLKDEV_INIT(NULL, "virt_38400000_ck",		&virt_38400000_ck),
	CLKDEV_INIT(NULL, "sys_clkin_ck",		&sys_clkin_ck),
	CLKDEV_INIT(NULL, "tie_low_clock_ck",		&tie_low_clock_ck),
	CLKDEV_INIT(NULL, "utmi_phy_clkout_ck",		&utmi_phy_clkout_ck),
	CLKDEV_INIT(NULL, "xclk60mhsp1_ck",		&xclk60mhsp1_ck),
	CLKDEV_INIT(NULL, "xclk60mhsp2_ck",		&xclk60mhsp2_ck),
	CLKDEV_INIT(NULL, "xclk60motg_ck",		&xclk60motg_ck),
	CLKDEV_INIT(NULL, "abe_dpll_bypass_clk_mux_ck",	&abe_dpll_bypass_clk_mux_ck),
	CLKDEV_INIT(NULL, "abe_dpll_refclk_mux_ck",	&abe_dpll_refclk_mux_ck),
	CLKDEV_INIT(NULL, "dpll_abe_ck",		&dpll_abe_ck),
	CLKDEV_INIT(NULL, "dpll_abe_x2_ck",		&dpll_abe_x2_ck),
	CLKDEV_INIT(NULL, "dpll_abe_m2x2_ck",		&dpll_abe_m2x2_ck),
	CLKDEV_INIT(NULL, "abe_24m_fclk",		&abe_24m_fclk),
	CLKDEV_INIT(NULL, "abe_clk",			&abe_clk),
	CLKDEV_INIT(NULL, "aess_fclk",			&aess_fclk),
	CLKDEV_INIT(NULL, "dpll_abe_m3x2_ck",		&dpll_abe_m3x2_ck),
	CLKDEV_INIT(NULL, "core_hsd_byp_clk_mux_ck",	&core_hsd_byp_clk_mux_ck),
	CLKDEV_INIT(NULL, "dpll_core_ck",		&dpll_core_ck),
	CLKDEV_INIT(NULL, "dpll_core_x2_ck",		&dpll_core_x2_ck),
	CLKDEV_INIT(NULL, "dpll_core_m6x2_ck",		&dpll_core_m6x2_ck),
	CLKDEV_INIT(NULL, "dpll_core_m2_ck",		&dpll_core_m2_ck),
	CLKDEV_INIT(NULL, "ddrphy_ck",			&ddrphy_ck),
	CLKDEV_INIT(NULL, "dpll_core_m5x2_ck",		&dpll_core_m5x2_ck),
	CLKDEV_INIT(NULL, "div_core_ck",		&div_core_ck),
	CLKDEV_INIT(NULL, "div_iva_hs_clk",		&div_iva_hs_clk),
	CLKDEV_INIT(NULL, "div_mpu_hs_clk",		&div_mpu_hs_clk),
	CLKDEV_INIT(NULL, "dpll_core_m4x2_ck",		&dpll_core_m4x2_ck),
	CLKDEV_INIT(NULL, "dll_clk_div_ck",		&dll_clk_div_ck),
	CLKDEV_INIT(NULL, "dpll_abe_m2_ck",		&dpll_abe_m2_ck),
	CLKDEV_INIT(NULL, "dpll_core_m3x2_ck",		&dpll_core_m3x2_ck),
	CLKDEV_INIT(NULL, "dpll_core_m7x2_ck",		&dpll_core_m7x2_ck),
	CLKDEV_INIT(NULL, "iva_hsd_byp_clk_mux_ck",	&iva_hsd_byp_clk_mux_ck),
	CLKDEV_INIT(NULL, "dpll_iva_ck",		&dpll_iva_ck),
	CLKDEV_INIT(NULL, "dpll_iva_x2_ck",		&dpll_iva_x2_ck),
	CLKDEV_INIT(NULL, "dpll_iva_m4x2_ck",		&dpll_iva_m4x2_ck),
	CLKDEV_INIT(NULL, "dpll_iva_m5x2_ck",		&dpll_iva_m5x2_ck),
	CLKDEV_INIT(NULL, "dpll_mpu_ck",		&dpll_mpu_ck),
	CLKDEV_INIT(NULL, "dpll_mpu_m2_ck",		&dpll_mpu_m2_ck),
	CLKDEV_INIT(NULL, "per_hs_clk_div_ck",		&per_hs_clk_div_ck),
	CLKDEV_INIT(NULL, "per_hsd_byp_clk_mux_ck",	&per_hsd_byp_clk_mux_ck),
	CLKDEV_INIT(NULL, "dpll_per_ck",		&dpll_per_ck),
	CLKDEV_INIT(NULL, "dpll_per_m2_ck",		&dpll_per_m2_ck),
	CLKDEV_INIT(NULL, "dpll_per_x2_ck",		&dpll_per_x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m2x2_ck",		&dpll_per_m2x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m3x2_ck",		&dpll_per_m3x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m4x2_ck",		&dpll_per_m4x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m5x2_ck",		&dpll_per_m5x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m6x2_ck",		&dpll_per_m6x2_ck),
	CLKDEV_INIT(NULL, "dpll_per_m7x2_ck",		&dpll_per_m7x2_ck),
	CLKDEV_INIT(NULL, "usb_hs_clk_div_ck",		&usb_hs_clk_div_ck),
	CLKDEV_INIT(NULL, "dpll_usb_ck",		&dpll_usb_ck),
	CLKDEV_INIT(NULL, "dpll_usb_clkdcoldo_ck",	&dpll_usb_clkdcoldo_ck),
	CLKDEV_INIT(NULL, "dpll_usb_m2_ck",		&dpll_usb_m2_ck),
	CLKDEV_INIT(NULL, "ducati_clk_mux_ck",		&ducati_clk_mux_ck),
	CLKDEV_INIT(NULL, "func_12m_fclk",		&func_12m_fclk),
	CLKDEV_INIT(NULL, "func_24m_clk",		&func_24m_clk),
	CLKDEV_INIT(NULL, "func_24mc_fclk",		&func_24mc_fclk),
	CLKDEV_INIT(NULL, "func_48m_fclk",		&func_48m_fclk),
	CLKDEV_INIT(NULL, "func_48mc_fclk",		&func_48mc_fclk),
	CLKDEV_INIT(NULL, "func_64m_fclk",		&func_64m_fclk),
	CLKDEV_INIT(NULL, "func_96m_fclk",		&func_96m_fclk),
	CLKDEV_INIT(NULL, "init_60m_fclk",		&init_60m_fclk),
	CLKDEV_INIT(NULL, "l3_div_ck",			&l3_div_ck),
	CLKDEV_INIT(NULL, "l4_div_ck",			&l4_div_ck),
	CLKDEV_INIT(NULL, "lp_clk_div_ck",		&lp_clk_div_ck),
	CLKDEV_INIT(NULL, "l4_wkup_clk_mux_ck",		&l4_wkup_clk_mux_ck),
	CLKDEV_INIT(NULL, "ocp_abe_iclk",		&ocp_abe_iclk),
	CLKDEV_INIT(NULL, "per_abe_24m_fclk",		&per_abe_24m_fclk),
	CLKDEV_INIT(NULL, "per_abe_nc_fclk",		&per_abe_nc_fclk),
	CLKDEV_INIT(NULL, "syc_clk_div_ck",		&syc_clk_div_ck),
	CLKDEV_INIT(NULL, "aes1_fck",			&aes1_fck),
	CLKDEV_INIT(NULL, "aes2_fck",			&aes2_fck),
	CLKDEV_INIT(NULL, "aess_fck",			&aess_fck),
	CLKDEV_INIT(NULL, "bandgap_fclk",		&bandgap_fclk),
	CLKDEV_INIT(NULL, "des3des_fck",		&des3des_fck),
	CLKDEV_INIT(NULL, "dmic_sync_mux_ck",		&dmic_sync_mux_ck),
	CLKDEV_INIT(NULL, "dmic_fck",			&dmic_fck),
	CLKDEV_INIT(NULL, "dsp_fck",			&dsp_fck),
	CLKDEV_INIT(NULL, "dss_sys_clk",		&dss_sys_clk),
	CLKDEV_INIT(NULL, "dss_tv_clk",			&dss_tv_clk),
	CLKDEV_INIT(NULL, "dss_dss_clk",		&dss_dss_clk),
	CLKDEV_INIT(NULL, "dss_48mhz_clk",		&dss_48mhz_clk),
	CLKDEV_INIT(NULL, "dss_fck",			&dss_fck),
	CLKDEV_INIT("omapdss_dss",	"ick",		&dss_fck),
	CLKDEV_INIT(NULL, "efuse_ctrl_cust_fck",	&efuse_ctrl_cust_fck),
	CLKDEV_INIT(NULL, "emif1_fck",			&emif1_fck),
	CLKDEV_INIT(NULL, "emif2_fck",			&emif2_fck),
	CLKDEV_INIT(NULL, "fdif_fclk",			&fdif_fclk),
	CLKDEV_INIT(NULL, "fpka_fck",			&fpka_fck),
	CLKDEV_INIT(NULL, "gpio1_dbclk",		&gpio1_dbclk),
	CLKDEV_INIT(NULL, "gpio1_ick",			&gpio1_ick),
	CLKDEV_INIT(NULL, "gpio2_dbclk",		&gpio2_dbclk),
	CLKDEV_INIT(NULL, "gpio2_ick",			&gpio2_ick),
	CLKDEV_INIT(NULL, "gpio3_dbclk",		&gpio3_dbclk),
	CLKDEV_INIT(NULL, "gpio3_ick",			&gpio3_ick),
	CLKDEV_INIT(NULL, "gpio4_dbclk",		&gpio4_dbclk),
	CLKDEV_INIT(NULL, "gpio4_ick",			&gpio4_ick),
	CLKDEV_INIT(NULL, "gpio5_dbclk",		&gpio5_dbclk),
	CLKDEV_INIT(NULL, "gpio5_ick",			&gpio5_ick),
	CLKDEV_INIT(NULL, "gpio6_dbclk",		&gpio6_dbclk),
	CLKDEV_INIT(NULL, "gpio6_ick",			&gpio6_ick),
	CLKDEV_INIT(NULL, "gpmc_ick",			&gpmc_ick),
	CLKDEV_INIT(NULL, "gpu_fck",			&gpu_fck),
	CLKDEV_INIT(NULL, "hdq1w_fck",			&hdq1w_fck),
	CLKDEV_INIT(NULL, "hsi_fclk",			&hsi_fclk),
	CLKDEV_INIT(NULL, "i2c1_fck",			&i2c1_fck),
	CLKDEV_INIT(NULL, "i2c2_fck",			&i2c2_fck),
	CLKDEV_INIT(NULL, "i2c3_fck",			&i2c3_fck),
	CLKDEV_INIT(NULL, "i2c4_fck",			&i2c4_fck),
	CLKDEV_INIT(NULL, "ipu_fck",			&ipu_fck),
	CLKDEV_INIT(NULL, "iss_ctrlclk",		&iss_ctrlclk),
	CLKDEV_INIT(NULL, "iss_fck",			&iss_fck),
	CLKDEV_INIT(NULL, "iva_fck",			&iva_fck),
	CLKDEV_INIT(NULL, "kbd_fck",			&kbd_fck),
	CLKDEV_INIT(NULL, "l3_instr_ick",		&l3_instr_ick),
	CLKDEV_INIT(NULL, "l3_main_3_ick",		&l3_main_3_ick),
	CLKDEV_INIT(NULL, "mcasp_sync_mux_ck",		&mcasp_sync_mux_ck),
	CLKDEV_INIT(NULL, "mcasp_fck",			&mcasp_fck),
	CLKDEV_INIT(NULL, "mcbsp1_sync_mux_ck",		&mcbsp1_sync_mux_ck),
	CLKDEV_INIT(NULL, "mcbsp1_fck",			&mcbsp1_fck),
	CLKDEV_INIT(NULL, "mcbsp2_sync_mux_ck",		&mcbsp2_sync_mux_ck),
	CLKDEV_INIT(NULL, "mcbsp2_fck",			&mcbsp2_fck),
	CLKDEV_INIT(NULL, "mcbsp3_sync_mux_ck",		&mcbsp3_sync_mux_ck),
	CLKDEV_INIT(NULL, "mcbsp3_fck",			&mcbsp3_fck),
	CLKDEV_INIT(NULL, "mcbsp4_sync_mux_ck",		&mcbsp4_sync_mux_ck),
	CLKDEV_INIT(NULL, "mcbsp4_fck",			&mcbsp4_fck),
	CLKDEV_INIT(NULL, "mcpdm_fck",			&mcpdm_fck),
	CLKDEV_INIT(NULL, "mcspi1_fck",			&mcspi1_fck),
	CLKDEV_INIT(NULL, "mcspi2_fck",			&mcspi2_fck),
	CLKDEV_INIT(NULL, "mcspi3_fck",			&mcspi3_fck),
	CLKDEV_INIT(NULL, "mcspi4_fck",			&mcspi4_fck),
	CLKDEV_INIT(NULL, "mmc1_fck",			&mmc1_fck),
	CLKDEV_INIT(NULL, "mmc2_fck",			&mmc2_fck),
	CLKDEV_INIT(NULL, "mmc3_fck",			&mmc3_fck),
	CLKDEV_INIT(NULL, "mmc4_fck",			&mmc4_fck),
	CLKDEV_INIT(NULL, "mmc5_fck",			&mmc5_fck),
	CLKDEV_INIT(NULL, "ocp2scp_usb_phy_phy_48m",	&ocp2scp_usb_phy_phy_48m),
	CLKDEV_INIT(NULL, "ocp2scp_usb_phy_ick",	&ocp2scp_usb_phy_ick),
	CLKDEV_INIT(NULL, "ocp_wp_noc_ick",		&ocp_wp_noc_ick),
	CLKDEV_INIT(NULL, "rng_ick",			&rng_ick),
	CLKDEV_INIT("omap_rng",	"ick",			&rng_ick),
	CLKDEV_INIT(NULL, "sha2md5_fck",		&sha2md5_fck),
	CLKDEV_INIT(NULL, "sl2if_ick",			&sl2if_ick),
	CLKDEV_INIT(NULL, "slimbus1_fclk_1",		&slimbus1_fclk_1),
	CLKDEV_INIT(NULL, "slimbus1_fclk_0",		&slimbus1_fclk_0),
	CLKDEV_INIT(NULL, "slimbus1_fclk_2",		&slimbus1_fclk_2),
	CLKDEV_INIT(NULL, "slimbus1_slimbus_clk",	&slimbus1_slimbus_clk),
	CLKDEV_INIT(NULL, "slimbus1_fck",		&slimbus1_fck),
	CLKDEV_INIT(NULL, "slimbus2_fclk_1",		&slimbus2_fclk_1),
	CLKDEV_INIT(NULL, "slimbus2_fclk_0",		&slimbus2_fclk_0),
	CLKDEV_INIT(NULL, "slimbus2_slimbus_clk",	&slimbus2_slimbus_clk),
	CLKDEV_INIT(NULL, "slimbus2_fck",		&slimbus2_fck),
	CLKDEV_INIT(NULL, "smartreflex_core_fck",	&smartreflex_core_fck),
	CLKDEV_INIT(NULL, "smartreflex_iva_fck",	&smartreflex_iva_fck),
	CLKDEV_INIT(NULL, "smartreflex_mpu_fck",	&smartreflex_mpu_fck),
	CLKDEV_INIT(NULL, "timer1_fck",			&timer1_fck),
	CLKDEV_INIT(NULL, "gpt1_fck",			&timer1_fck),
	CLKDEV_INIT(NULL, "timer10_fck",		&timer10_fck),
	CLKDEV_INIT(NULL, "gpt10_fck",			&timer10_fck),
	CLKDEV_INIT(NULL, "timer11_fck",		&timer11_fck),
	CLKDEV_INIT(NULL, "gpt11_fck",			&timer11_fck),
	CLKDEV_INIT(NULL, "timer2_fck",			&timer2_fck),
	CLKDEV_INIT(NULL, "gpt2_fck",			&timer2_fck),
	CLKDEV_INIT(NULL, "timer3_fck",			&timer3_fck),
	CLKDEV_INIT(NULL, "gpt3_fck",			&timer3_fck),
	CLKDEV_INIT(NULL, "timer4_fck",			&timer4_fck),
	CLKDEV_INIT(NULL, "gpt4_fck",			&timer4_fck),
	CLKDEV_INIT(NULL, "timer5_fck",			&timer5_fck),
	CLKDEV_INIT(NULL, "gpt5_fck",			&timer5_fck),
	CLKDEV_INIT(NULL, "timer6_fck",			&timer6_fck),
	CLKDEV_INIT(NULL, "gpt6_fck",			&timer6_fck),
	CLKDEV_INIT(NULL, "timer7_fck",			&timer7_fck),
	CLKDEV_INIT(NULL, "gpt7_fck",			&timer7_fck),
	CLKDEV_INIT(NULL, "timer8_fck",			&timer8_fck),
	CLKDEV_INIT(NULL, "gpt8_fck",			&timer8_fck),
	CLKDEV_INIT(NULL, "timer9_fck",			&timer9_fck),
	CLKDEV_INIT(NULL, "gpt9_fck",			&timer9_fck),
	CLKDEV_INIT(NULL, "uart1_fck",			&uart1_fck),
	CLKDEV_INIT(NULL, "uart2_fck",			&uart2_fck),
	CLKDEV_INIT(NULL, "uart3_fck",			&uart3_fck),
	CLKDEV_INIT(NULL, "uart4_fck",			&uart4_fck),
	CLKDEV_INIT(NULL, "usb_host_fs_fck",		&usb_host_fs_fck),
	CLKDEV_INIT("usbhs-omap.0",	"fs_fck",	&usb_host_fs_fck),
	CLKDEV_INIT(NULL, "utmi_p1_gfclk",		&utmi_p1_gfclk),
	CLKDEV_INIT(NULL, "usb_host_hs_utmi_p1_clk",	&usb_host_hs_utmi_p1_clk),
	CLKDEV_INIT(NULL, "utmi_p2_gfclk",		&utmi_p2_gfclk),
	CLKDEV_INIT(NULL, "usb_host_hs_utmi_p2_clk",	&usb_host_hs_utmi_p2_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_utmi_p3_clk",	&usb_host_hs_utmi_p3_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_hsic480m_p1_clk",&usb_host_hs_hsic480m_p1_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_hsic60m_p1_clk",	&usb_host_hs_hsic60m_p1_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_hsic60m_p2_clk",	&usb_host_hs_hsic60m_p2_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_hsic480m_p2_clk",&usb_host_hs_hsic480m_p2_clk),
	CLKDEV_INIT(NULL, "usb_host_hs_func48mclk",	&usb_host_hs_func48mclk),
	CLKDEV_INIT(NULL, "usb_host_hs_fck",		&usb_host_hs_fck),
	CLKDEV_INIT("usbhs-omap.0",	"hs_fck",	&usb_host_hs_fck),
	CLKDEV_INIT(NULL, "otg_60m_gfclk",		&otg_60m_gfclk),
	CLKDEV_INIT(NULL, "usb_otg_hs_xclk",		&usb_otg_hs_xclk),
	CLKDEV_INIT(NULL, "usb_otg_hs_ick",		&usb_otg_hs_ick),
	CLKDEV_INIT("musb-omap2430",	"ick",		&usb_otg_hs_ick),
	CLKDEV_INIT(NULL, "usb_phy_cm_clk32k",		&usb_phy_cm_clk32k),
	CLKDEV_INIT(NULL, "usb_tll_hs_usb_ch2_clk",	&usb_tll_hs_usb_ch2_clk),
	CLKDEV_INIT(NULL, "usb_tll_hs_usb_ch0_clk",	&usb_tll_hs_usb_ch0_clk),
	CLKDEV_INIT(NULL, "usb_tll_hs_usb_ch1_clk",	&usb_tll_hs_usb_ch1_clk),
	CLKDEV_INIT(NULL, "usb_tll_hs_ick",		&usb_tll_hs_ick),
	CLKDEV_INIT("usbhs-omap.0",	"usbtll_ick",	&usb_tll_hs_ick),
	CLKDEV_INIT(NULL, "usim_ck",			&usim_ck),
	CLKDEV_INIT(NULL, "usim_fclk",			&usim_fclk),
	CLKDEV_INIT(NULL, "usim_fck",			&usim_fck),
	CLKDEV_INIT(NULL, "wd_timer2_fck",		&wd_timer2_fck),
	CLKDEV_INIT(NULL, "wd_timer3_fck",		&wd_timer3_fck),
	CLKDEV_INIT(NULL, "pmd_stm_clock_mux_ck",	&pmd_stm_clock_mux_ck),
	CLKDEV_INIT(NULL, "pmd_trace_clk_mux_ck",	&pmd_trace_clk_mux_ck),
	CLKDEV_INIT(NULL, "stm_clk_div_ck",		&stm_clk_div_ck),
	CLKDEV_INIT(NULL, "trace_clk_div_ck",		&trace_clk_div_ck),
	CLKDEV_INIT(NULL, "auxclk0_src_ck",		&auxclk0_src_ck),
	CLKDEV_INIT(NULL, "auxclk0_ck",			&auxclk0_ck),
	CLKDEV_INIT(NULL, "auxclkreq0_ck",		&auxclkreq0_ck),
	CLKDEV_INIT(NULL, "auxclk1_src_ck",		&auxclk1_src_ck),
	CLKDEV_INIT(NULL, "auxclk1_ck",			&auxclk1_ck),
	CLKDEV_INIT(NULL, "auxclkreq1_ck",		&auxclkreq1_ck),
	CLKDEV_INIT(NULL, "auxclk2_src_ck",		&auxclk2_src_ck),
	CLKDEV_INIT(NULL, "auxclk2_ck",			&auxclk2_ck),
	CLKDEV_INIT(NULL, "auxclkreq2_ck",		&auxclkreq2_ck),
	CLKDEV_INIT(NULL, "auxclk3_src_ck",		&auxclk3_src_ck),
	CLKDEV_INIT(NULL, "auxclk3_ck",			&auxclk3_ck),
	CLKDEV_INIT(NULL, "auxclkreq3_ck",		&auxclkreq3_ck),
	CLKDEV_INIT(NULL, "auxclk4_src_ck",		&auxclk4_src_ck),
	CLKDEV_INIT(NULL, "auxclk4_ck",			&auxclk4_ck),
	CLKDEV_INIT(NULL, "auxclkreq4_ck",		&auxclkreq4_ck),
	CLKDEV_INIT(NULL, "auxclk5_src_ck",		&auxclk5_src_ck),
	CLKDEV_INIT(NULL, "auxclk5_ck",			&auxclk5_ck),
	CLKDEV_INIT(NULL, "auxclkreq5_ck",		&auxclkreq5_ck),
	CLKDEV_INIT(NULL,	"gpmc_ck",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt1_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt2_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt3_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt4_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt5_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt6_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt7_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt8_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt9_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt10_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"gpt11_ick",		&dummy_ck),
	CLKDEV_INIT("omap_i2c.1",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_i2c.2",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_i2c.3",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_i2c.4",	"ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"mailboxes_ick",	&dummy_ck),
	CLKDEV_INIT("omap_hsmmc.0",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_hsmmc.1",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_hsmmc.2",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_hsmmc.3",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap_hsmmc.4",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap-mcbsp.1",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap-mcbsp.2",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap-mcbsp.3",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap-mcbsp.4",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap2_mcspi.1",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap2_mcspi.2",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap2_mcspi.3",	"ick",		&dummy_ck),
	CLKDEV_INIT("omap2_mcspi.4",	"ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"uart1_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"uart2_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"uart3_ick",		&dummy_ck),
	CLKDEV_INIT(NULL,	"uart4_ick",		&dummy_ck),
	CLKDEV_INIT("usbhs-omap.0",	"usbhost_ick",	&dummy_ck),
	CLKDEV_INIT("usbhs-omap.0",	"usbtll_fck",	&dummy_ck),
	CLKDEV_INIT("omap_wdt",	"ick",			&dummy_ck),
	CLKDEV_INIT("omap_timer.1",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.2",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.3",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.4",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.5",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.6",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.7",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.8",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.9",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.10",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.11",	"32k_ck",	&sys_32k_ck),
	CLKDEV_INIT("omap_timer.1",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.2",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.3",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.4",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.9",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.10",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.11",	"sys_ck",	&sys_clkin_ck),
	CLKDEV_INIT("omap_timer.5",	"sys_ck",	&syc_clk_div_ck),
	CLKDEV_INIT("omap_timer.6",	"sys_ck",	&syc_clk_div_ck),
	CLKDEV_INIT("omap_timer.7",	"sys_ck",	&syc_clk_div_ck),
	CLKDEV_INIT("omap_timer.8",	"sys_ck",	&syc_clk_div_ck),
};

int __init omap4xxx_clk_init(void)
{
	struct clk_lookup *c;

	if (cpu_is_omap443x()) {
		cpu_mask = RATE_IN_4430;
	} else if (cpu_is_omap446x()) {
		cpu_mask = RATE_IN_4460 | RATE_IN_4430;
	} else {
		return 0;
	}

	for (c = omap44xx_clks; c < omap44xx_clks + ARRAY_SIZE(omap44xx_clks);
									  c++)
	{
		clkdev_add(c);
		__clk_init(NULL, c->clk);
	}

	return 0;
}
